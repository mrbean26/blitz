#version 330 core

layout(location = 0) in vec3 vertex;
layout(location = 1) in vec3 inColour;

uniform mat4 model;
uniform mat4 view;
uniform mat4 projection;

uniform float areaScaleX;
uniform bool water = false;

uniform float waveWidth;
uniform float waveHeight;
uniform float wavePercentage;

out vec4 position;
out vec3 originalPos;
out vec3 aColour;

void main(){
    position = model * vec4(vertex, 1.0f);
    originalPos = vertex;

    vec3 point = vertex;
    if(water){
	float distance = distance(areaScaleX * (wavePercentage / 100.0f), vertex.x);
	distance = clamp(distance, 0.0f, 1.0f);
	distance = 1.0f - distance;
	distance = distance * waveWidth;

	point.y = vertex.y - (distance * waveHeight);
    }

    aColour = inColour;
    gl_Position =  projection * view * model * vec4(point, 1.0f);
}