#include "inventory.h"
#include "texture.h"
#include "saveFiles.h"
#include "frontend.h"
#include "interface.h"
#include "structures.h"
#include "monsters.h"

#include <glfw3.h>
#include <glew.h>
#include <vector>
using namespace std;

bool inventoryOpen = false;
int interactKeyInv = 0;
vector<inventorySlot> allSlots;
int currentSwappingIndex = -1;

void getInventory(){
    vector<float> currentInventory = getVectorFile(
        WorldGeneration.worldLinesPath, "inventory");
    vector<float> currentInventoryQuantity = getVectorFile(
        WorldGeneration.worldLinesPath, "inventoryQuantity");
    for(int s = 0; s < SLOT_COUNT; s++){
        inventorySlot newSlot;
        if(s < HOTBAR_COUNT){
            newSlot.hotbar = true;
        }
        newSlot.itemType = (int) currentInventory[s];
        newSlot.itemQuantity = (int) currentInventoryQuantity[s];
        allSlots[newVectorPos(&allSlots)] = newSlot;
    }
}

vector<int> allSlotTexts;
void startInventoryUI(){
    texture slotTexture = loadTexture("assets/images/inventorySlot.png");
    vec3 startPos = vec3(-18.5f, 10.0f, 0.0f);
    vector<int> itemIconCreations; // have to be created after slots
    for(int s = 0; s < SLOT_COUNT; s++){
        int newSlotButton = createButton();
        allButtons[newSlotButton].interactive = false;
        allButtons[newSlotButton].texture = slotTexture;
        allButtons[newSlotButton].scale = vec2(0.25f);

        if(s > HOTBAR_COUNT - 1){
            allButtons[newSlotButton].active = false;
        }
        
        vec3 pos = startPos;
        pos.x += 2.1f * ((float) floor(s / HOTBAR_COUNT));
        if(s > HOTBAR_COUNT - 1.0f){
            pos.x += 0.4f;
        }
        pos.y -= 2.1f * (s - ((float) floor(s / HOTBAR_COUNT) * HOTBAR_COUNT));
        allButtons[newSlotButton].position = pos;

        allSlots[s].buttonIndex = newSlotButton;
        allSlots[s].buttonPos = pos;

        // icons
        if(allSlots[s].itemType != -1){
            itemIconCreations[newVectorPos(&itemIconCreations)] = s;
        }
    }
    // create icons
    int iconCount = itemIconCreations.size();
    for(int i = 0; i < iconCount; i++){
        int index = itemIconCreations[i];
        allItems[allSlots[index].itemType].createButtonIcon(index);
    }
    // texts
    map<GLchar, Character> zekton = getFont("assets/fonts/zekton.ttf", display_x / 90);
    for(int s = 0; s < SLOT_COUNT; s++){
        int newText = createText();
        allTexts[newText].displayedText = "0";
        allTexts[newText].fontCharacters = zekton;
        allTexts[newText].colour = vec3(0.0f);
        allSlotTexts[newVectorPos(&allSlotTexts)] = newText;
    }
}

void inventoryBegin(){
    startItems();
    getInventory();
    getEntities();
    startInventoryUI();
    vector<string> inputLines = readLines("assets/saves/inputs.save");
    interactKeyInv = stoi(inputLines[6]);
}

vector<item> allItems;
void startItems(){
    vector<float> oilCanVertices{
      -0.020000f, 0.897558f, -0.171014f, 0.558039f, 0.380196f, 0.221765f, -0.020000f, 0.857558f, -0.491014f, 0.558039f, 0.380196f, 0.221765f, -0.020000f, 0.857558f, -0.171014f, 0.558039f, 0.380196f, 0.221765f, -0.020000f, 0.897558f, -0.491014f, 0.566471f, 0.393333f, 0.220196f, 0.020000f, 0.857558f, -0.491014f, 0.566471f, 0.393333f, 0.220196f, -0.020000f, 0.857558f, -0.491014f, 0.566471f, 0.393333f, 0.220196f, 0.020000f, 0.897558f, -0.491014f, 0.559412f, 0.374118f, 0.207451f, 0.020000f, 0.857558f, -0.171014f, 0.559412f, 0.374118f, 0.207451f, 0.020000f, 0.857558f, -0.491014f, 0.559412f, 0.374118f, 0.207451f, 0.020000f, 0.897558f, -0.171014f, 0.565686f, 0.392941f, 0.215294f, -0.020000f, 0.857558f, -0.171014f, 0.565686f, 0.392941f, 0.215294f, 0.020000f, 0.857558f, -0.171014f, 0.565686f, 0.392941f, 0.215294f, 0.020000f, 0.857558f, -0.491014f, 0.557843f, 0.382353f, 0.210784f, -0.020000f, 0.857558f, -0.171014f, 0.557843f, 0.382353f, 0.210784f, -0.020000f, 0.857558f, -0.491014f, 0.557843f, 0.382353f, 0.210784f, -0.020000f, 0.897558f, -0.491014f, 0.571569f, 0.384510f, 0.200784f, 0.020000f, 0.897558f, -0.171014f, 0.571569f, 0.384510f, 0.200784f, 0.020000f, 0.897558f, -0.491014f, 0.571569f, 0.384510f, 0.200784f, -0.020000f, 0.897558f, -0.171014f, 0.550196f, 0.390000f, 0.201176f, -0.020000f, 0.897558f, -0.491014f, 0.550196f, 0.390000f, 0.201176f, -0.020000f, 0.857558f, -0.491014f, 0.550196f, 0.390000f, 0.201176f, -0.020000f, 0.897558f, -0.491014f, 0.574706f, 0.388039f, 0.205098f, 0.020000f, 0.897558f, -0.491014f, 0.574706f, 0.388039f, 0.205098f, 0.020000f, 0.857558f, -0.491014f, 0.574706f, 0.388039f, 0.205098f, 0.020000f, 0.897558f, -0.491014f, 0.557451f, 0.382353f, 0.204314f, 0.020000f, 0.897558f, -0.171014f, 0.557451f, 0.382353f, 0.204314f, 0.020000f, 0.857558f, -0.171014f, 0.557451f, 0.382353f, 0.204314f, 0.020000f, 0.897558f, -0.171014f, 0.559216f, 0.376471f, 0.216275f, -0.020000f, 0.897558f, -0.171014f, 0.559216f, 0.376471f, 0.216275f, -0.020000f, 0.857558f, -0.171014f, 0.559216f, 0.376471f, 0.216275f, 0.020000f, 0.857558f, -0.491014f, 0.572157f, 0.371765f, 0.207647f, 0.020000f, 0.857558f, -0.171014f, 0.572157f, 0.371765f, 0.207647f, -0.020000f, 0.857558f, -0.171014f, 0.572157f, 0.371765f, 0.207647f, -0.020000f, 0.897558f, -0.491014f, 0.571176f, 0.387843f, 0.219608f, -0.020000f, 0.897558f, -0.171014f, 0.571176f, 0.387843f, 0.219608f, 0.020000f, 0.897558f, -0.171014f, 0.571176f, 0.387843f, 0.219608f, 0.000000f, 1.036256f, -0.200000f, 0.552549f, 0.371961f, 0.203333f, 0.117557f, 0.636256f, -0.161803f, 0.552549f, 0.371961f, 0.203333f, 0.000000f, 0.636256f, -0.200000f, 0.552549f, 0.371961f, 0.203333f, 0.117557f, 1.036256f, -0.161803f, 0.572549f, 0.370196f, 0.212157f, 0.190211f, 0.636256f, -0.061803f, 0.572549f, 0.370196f, 0.212157f, 0.117557f, 0.636256f, -0.161803f, 0.572549f, 0.370196f, 0.212157f, 0.190211f, 1.036256f, -0.061803f, 0.565686f, 0.390980f, 0.203922f, 0.190211f, 0.636256f, 0.061803f, 0.565686f, 0.390980f, 0.203922f, 0.190211f, 0.636256f, -0.061803f, 0.565686f, 0.390980f, 0.203922f, 0.190211f, 1.036256f, 0.061803f, 0.568039f, 0.375490f, 0.217843f, 0.117557f, 0.636256f, 0.161803f, 0.568039f, 0.375490f, 0.217843f, 0.190211f, 0.636256f, 0.061803f, 0.568039f, 0.375490f, 0.217843f, 0.117557f, 1.036256f, 0.161803f, 0.561569f, 0.371961f, 0.203922f, 0.000000f, 0.636256f, 0.200000f, 0.561569f, 0.371961f, 0.203922f, 0.117557f, 0.636256f, 0.161803f, 0.561569f, 0.371961f, 0.203922f, 0.000000f, 1.036256f, 0.200000f, 0.566667f, 0.374510f, 0.223137f, -0.117557f, 0.636256f, 0.161803f, 0.566667f, 0.374510f, 0.223137f, 0.000000f, 0.636256f, 0.200000f, 0.566667f, 0.374510f, 0.223137f, -0.117557f, 1.036256f, 0.161803f, 0.569216f, 0.376275f, 0.217059f, -0.190211f, 0.636256f, 0.061803f, 0.569216f, 0.376275f, 0.217059f, -0.117557f, 0.636256f, 0.161803f, 0.569216f, 0.376275f, 0.217059f, -0.190211f, 1.036256f, 0.061803f, 0.567451f, 0.389020f, 0.203137f, -0.190211f, 0.636256f, -0.061803f, 0.567451f, 0.389020f, 0.203137f, -0.190211f, 0.636256f, 0.061803f, 0.567451f, 0.389020f, 0.203137f, 0.190211f, 1.036256f, 0.061803f, 0.574314f, 0.392353f, 0.218039f, 0.190211f, 1.036256f, -0.061803f, 0.574314f, 0.392353f, 0.218039f, -0.190211f, 1.036256f, -0.061803f, 0.574314f, 0.392353f, 0.218039f, -0.190211f, 1.036256f, -0.061803f, 0.562549f, 0.376667f, 0.201373f, -0.117557f, 0.636256f, -0.161803f, 0.562549f, 0.376667f, 0.201373f, -0.190211f, 0.636256f, -0.061803f, 0.562549f, 0.376667f, 0.201373f, -0.117557f, 1.036256f, -0.161803f, 0.554510f, 0.380196f, 0.217059f, 0.000000f, 0.636256f, -0.200000f, 0.554510f, 0.380196f, 0.217059f, -0.117557f, 0.636256f, -0.161803f, 0.554510f, 0.380196f, 0.217059f, -0.190211f, 0.636256f, -0.061803f, 0.558235f, 0.372745f, 0.210980f, -0.117557f, 0.636256f, -0.161803f, 0.558235f, 0.372745f, 0.210980f, 0.190211f, 0.636256f, 0.061803f, 0.558235f, 0.372745f, 0.210980f, 0.000000f, 1.036256f, -0.200000f, 0.552941f, 0.394510f, 0.222157f, 0.117557f, 1.036256f, -0.161803f, 0.552941f, 0.394510f, 0.222157f, 0.117557f, 0.636256f, -0.161803f, 0.552941f, 0.394510f, 0.222157f, 0.117557f, 1.036256f, -0.161803f, 0.571569f, 0.373922f, 0.222157f, 0.190211f, 1.036256f, -0.061803f, 0.571569f, 0.373922f, 0.222157f, 0.190211f, 0.636256f, -0.061803f, 0.571569f, 0.373922f, 0.222157f, 0.190211f, 1.036256f, -0.061803f, 0.551765f, 0.393333f, 0.213922f, 0.190211f, 1.036256f, 0.061803f, 0.551765f, 0.393333f, 0.213922f, 0.190211f, 0.636256f, 0.061803f, 0.551765f, 0.393333f, 0.213922f, 0.190211f, 1.036256f, 0.061803f, 0.559804f, 0.385882f, 0.202941f, 0.117557f, 1.036256f, 0.161803f, 0.559804f, 0.385882f, 0.202941f, 0.117557f, 0.636256f, 0.161803f, 0.559804f, 0.385882f, 0.202941f, 0.117557f, 1.036256f, 0.161803f, 0.567059f, 0.375686f, 0.202549f, 0.000000f, 1.036256f, 0.200000f, 0.567059f, 0.375686f, 0.202549f, 0.000000f, 0.636256f, 0.200000f, 0.567059f, 0.375686f, 0.202549f, 0.000000f, 1.036256f, 0.200000f, 0.551961f, 0.387255f, 0.203725f, -0.117557f, 1.036256f, 0.161803f, 0.551961f, 0.387255f, 0.203725f, -0.117557f, 0.636256f, 0.161803f, 0.551961f, 0.387255f, 0.203725f, -0.117557f, 1.036256f, 0.161803f, 0.560392f, 0.380588f, 0.222549f, -0.190211f, 1.036256f, 0.061803f, 0.560392f, 0.380588f, 0.222549f, -0.190211f, 0.636256f, 0.061803f, 0.560392f, 0.380588f, 0.222549f, -0.190211f, 1.036256f, 0.061803f, 0.553922f, 0.384902f, 0.214706f, -0.190211f, 1.036256f, -0.061803f, 0.553922f, 0.384902f, 0.214706f, -0.190211f, 0.636256f, -0.061803f, 0.553922f, 0.384902f, 0.214706f, 0.190211f, 1.036256f, -0.061803f, 0.572745f, 0.379804f, 0.213529f, 0.117557f, 1.036256f, -0.161803f, 0.572745f, 0.379804f, 0.213529f, 0.000000f, 1.036256f, -0.200000f, 0.572745f, 0.379804f, 0.213529f, 0.000000f, 1.036256f, -0.200000f, 0.556078f, 0.371373f, 0.200000f, -0.117557f, 1.036256f, -0.161803f, 0.556078f, 0.371373f, 0.200000f, 0.190211f, 1.036256f, -0.061803f, 0.556078f, 0.371373f, 0.200000f, -0.117557f, 1.036256f, -0.161803f, 0.563137f, 0.383137f, 0.219216f, -0.190211f, 1.036256f, -0.061803f, 0.563137f, 0.383137f, 0.219216f, 0.190211f, 1.036256f, -0.061803f, 0.563137f, 0.383137f, 0.219216f, -0.190211f, 1.036256f, -0.061803f, 0.554706f, 0.371373f, 0.203922f, -0.190211f, 1.036256f, 0.061803f, 0.554706f, 0.371373f, 0.203922f, 0.117557f, 1.036256f, 0.161803f, 0.554706f, 0.371373f, 0.203922f, -0.190211f, 1.036256f, 0.061803f, 0.559804f, 0.376667f, 0.213333f, -0.117557f, 1.036256f, 0.161803f, 0.559804f, 0.376667f, 0.213333f, 0.117557f, 1.036256f, 0.161803f, 0.559804f, 0.376667f, 0.213333f, -0.117557f, 1.036256f, 0.161803f, 0.558431f, 0.370000f, 0.204314f, 0.000000f, 1.036256f, 0.200000f, 0.558431f, 0.370000f, 0.204314f, 0.117557f, 1.036256f, 0.161803f, 0.558431f, 0.370000f, 0.204314f, 0.117557f, 1.036256f, 0.161803f, 0.559216f, 0.392353f, 0.220980f, 0.190211f, 1.036256f, 0.061803f, 0.559216f, 0.392353f, 0.220980f, -0.190211f, 1.036256f, -0.061803f, 0.559216f, 0.392353f, 0.220980f, -0.190211f, 1.036256f, -0.061803f, 0.565490f, 0.373333f, 0.200392f, -0.117557f, 1.036256f, -0.161803f, 0.565490f, 0.373333f, 0.200392f, -0.117557f, 0.636256f, -0.161803f, 0.565490f, 0.373333f, 0.200392f, -0.117557f, 1.036256f, -0.161803f, 0.571569f, 0.386078f, 0.203333f, 0.000000f, 1.036256f, -0.200000f, 0.571569f, 0.386078f, 0.203333f, 0.000000f, 0.636256f, -0.200000f, 0.571569f, 0.386078f, 0.203333f, -0.117557f, 0.636256f, -0.161803f, 0.568431f, 0.370588f, 0.200392f, 0.000000f, 0.636256f, -0.200000f, 0.568431f, 0.370588f, 0.200392f, 0.117557f, 0.636256f, -0.161803f, 0.568431f, 0.370588f, 0.200392f, 0.117557f, 0.636256f, -0.161803f, 0.556471f, 0.385686f, 0.218431f, 0.190211f, 0.636256f, -0.061803f, 0.556471f, 0.385686f, 0.218431f, -0.117557f, 0.636256f, -0.161803f, 0.556471f, 0.385686f, 0.218431f, 0.190211f, 0.636256f, -0.061803f, 0.572353f, 0.378824f, 0.201373f, 0.190211f, 0.636256f, 0.061803f, 0.572353f, 0.378824f, 0.201373f, -0.117557f, 0.636256f, -0.161803f, 0.572353f, 0.378824f, 0.201373f, 0.190211f, 0.636256f, 0.061803f, 0.559804f, 0.371373f, 0.224118f, 0.117557f, 0.636256f, 0.161803f, 0.559804f, 0.371373f, 0.224118f, 0.000000f, 0.636256f, 0.200000f, 0.559804f, 0.371373f, 0.224118f, 0.000000f, 0.636256f, 0.200000f, 0.550196f, 0.393333f, 0.218039f, -0.117557f, 0.636256f, 0.161803f, 0.550196f, 0.393333f, 0.218039f, 0.190211f, 0.636256f, 0.061803f, 0.550196f, 0.393333f, 0.218039f, -0.117557f, 0.636256f, 0.161803f, 0.569608f, 0.376667f, 0.217647f, -0.190211f, 0.636256f, 0.061803f, 0.569608f, 0.376667f, 0.217647f, 0.190211f, 0.636256f, 0.061803f, 0.569608f, 0.376667f, 0.217647f, -0.190211f, 0.636256f, 0.061803f, 0.568627f, 0.383137f, 0.218824f, -0.190211f, 0.636256f, -0.061803f, 0.568627f, 0.383137f, 0.218824f, 0.190211f, 0.636256f, 0.061803f, 0.568627f, 0.383137f, 0.218824f, 0.000000f, 0.797829f, -0.300000f, 0.566863f, 0.373726f, 0.215294f, 0.176336f, -0.002171f, -0.242705f, 0.566863f, 0.373726f, 0.215294f, 0.000000f, -0.002171f, -0.300000f, 0.566863f, 0.373726f, 0.215294f, 0.176336f, 0.797829f, -0.242705f, 0.570784f, 0.387843f, 0.209020f, 0.285317f, -0.002171f, -0.092705f, 0.570784f, 0.387843f, 0.209020f, 0.176336f, -0.002171f, -0.242705f, 0.570784f, 0.387843f, 0.209020f, 0.285317f, 0.797829f, -0.092705f, 0.564118f, 0.380588f, 0.214510f, 0.285317f, -0.002171f, 0.092705f, 0.564118f, 0.380588f, 0.214510f, 0.285317f, -0.002171f, -0.092705f, 0.564118f, 0.380588f, 0.214510f, 0.285317f, 0.797829f, 0.092705f, 0.564902f, 0.375882f, 0.216667f, 0.176336f, -0.002171f, 0.242705f, 0.564902f, 0.375882f, 0.216667f, 0.285317f, -0.002171f, 0.092705f, 0.564902f, 0.375882f, 0.216667f, 0.176336f, 0.797829f, 0.242705f, 0.552157f, 0.385490f, 0.218235f, 0.000000f, -0.002171f, 0.300000f, 0.552157f, 0.385490f, 0.218235f, 0.176336f, -0.002171f, 0.242705f, 0.552157f, 0.385490f, 0.218235f, 0.000000f, 0.797829f, 0.300000f, 0.550784f, 0.372157f, 0.201765f, -0.176336f, -0.002171f, 0.242705f, 0.550784f, 0.372157f, 0.201765f, 0.000000f, -0.002171f, 0.300000f, 0.550784f, 0.372157f, 0.201765f, -0.176336f, 0.797829f, 0.242705f, 0.562745f, 0.387647f, 0.216667f, -0.285317f, -0.002171f, 0.092705f, 0.562745f, 0.387647f, 0.216667f, -0.176336f, -0.002171f, 0.242705f, 0.562745f, 0.387647f, 0.216667f, -0.285317f, 0.797829f, 0.092705f, 0.551176f, 0.377059f, 0.220392f, -0.285317f, -0.002171f, -0.092705f, 0.551176f, 0.377059f, 0.220392f, -0.285317f, -0.002171f, 0.092705f, 0.551176f, 0.377059f, 0.220392f, 0.285317f, 0.797829f, 0.092705f, 0.559020f, 0.388235f, 0.200784f, 0.285317f, 0.797829f, -0.092705f, 0.559020f, 0.388235f, 0.200784f, -0.285317f, 0.797829f, -0.092705f, 0.559020f, 0.388235f, 0.200784f, -0.285317f, 0.797829f, -0.092705f, 0.570000f, 0.390196f, 0.219216f, -0.176335f, -0.002171f, -0.242705f, 0.570000f, 0.390196f, 0.219216f, -0.285317f, -0.002171f, -0.092705f, 0.570000f, 0.390196f, 0.219216f, -0.176335f, 0.797829f, -0.242705f, 0.554706f, 0.373529f, 0.208431f, 0.000000f, -0.002171f, -0.300000f, 0.554706f, 0.373529f, 0.208431f, -0.176335f, -0.002171f, -0.242705f, 0.554706f, 0.373529f, 0.208431f, 0.000000f, -0.002171f, 0.300000f, 0.566667f, 0.391569f, 0.219608f, -0.285317f, -0.002171f, 0.092705f, 0.566667f, 0.391569f, 0.219608f, -0.176335f, -0.002171f, -0.242705f, 0.566667f, 0.391569f, 0.219608f, 0.000000f, 0.797829f, -0.300000f, 0.555098f, 0.376863f, 0.210392f, 0.176336f, 0.797829f, -0.242705f, 0.555098f, 0.376863f, 0.210392f, 0.176336f, -0.002171f, -0.242705f, 0.555098f, 0.376863f, 0.210392f, 0.176336f, 0.797829f, -0.242705f, 0.568431f, 0.370392f, 0.224510f, 0.285317f, 0.797829f, -0.092705f, 0.568431f, 0.370392f, 0.224510f, 0.285317f, -0.002171f, -0.092705f, 0.568431f, 0.370392f, 0.224510f, 0.285317f, 0.797829f, -0.092705f, 0.558235f, 0.390588f, 0.218235f, 0.285317f, 0.797829f, 0.092705f, 0.558235f, 0.390588f, 0.218235f, 0.285317f, -0.002171f, 0.092705f, 0.558235f, 0.390588f, 0.218235f, 0.285317f, 0.797829f, 0.092705f, 0.566863f, 0.378824f, 0.206667f, 0.176336f, 0.797829f, 0.242705f, 0.566863f, 0.378824f, 0.206667f, 0.176336f, -0.002171f, 0.242705f, 0.566863f, 0.378824f, 0.206667f, 0.176336f, 0.797829f, 0.242705f, 0.551961f, 0.370784f, 0.205294f, 0.000000f, 0.797829f, 0.300000f, 0.551961f, 0.370784f, 0.205294f, 0.000000f, -0.002171f, 0.300000f, 0.551961f, 0.370784f, 0.205294f, 0.000000f, 0.797829f, 0.300000f, 0.551569f, 0.386863f, 0.202549f, -0.176336f, 0.797829f, 0.242705f, 0.551569f, 0.386863f, 0.202549f, -0.176336f, -0.002171f, 0.242705f, 0.551569f, 0.386863f, 0.202549f, -0.176336f, 0.797829f, 0.242705f, 0.565686f, 0.392745f, 0.216667f, -0.285317f, 0.797829f, 0.092705f, 0.565686f, 0.392745f, 0.216667f, -0.285317f, -0.002171f, 0.092705f, 0.565686f, 0.392745f, 0.216667f, -0.285317f, 0.797829f, 0.092705f, 0.574118f, 0.372353f, 0.210196f, -0.285317f, 0.797829f, -0.092705f, 0.574118f, 0.372353f, 0.210196f, -0.285317f, -0.002171f, -0.092705f, 0.574118f, 0.372353f, 0.210196f, 0.285317f, 0.797829f, -0.092705f, 0.555098f, 0.378235f, 0.201765f, 0.176336f, 0.797829f, -0.242705f, 0.555098f, 0.378235f, 0.201765f, 0.000000f, 0.797829f, -0.300000f, 0.555098f, 0.378235f, 0.201765f, 0.000000f, 0.797829f, -0.300000f, 0.561765f, 0.382745f, 0.215098f, -0.176335f, 0.797829f, -0.242705f, 0.561765f, 0.382745f, 0.215098f, 0.285317f, 0.797829f, -0.092705f, 0.561765f, 0.382745f, 0.215098f, -0.176335f, 0.797829f, -0.242705f, 0.550196f, 0.386863f, 0.200392f, -0.285317f, 0.797829f, -0.092705f, 0.550196f, 0.386863f, 0.200392f, 0.285317f, 0.797829f, -0.092705f, 0.550196f, 0.386863f, 0.200392f, -0.285317f, 0.797829f, -0.092705f, 0.569020f, 0.370588f, 0.212353f, -0.285317f, 0.797829f, 0.092705f, 0.569020f, 0.370588f, 0.212353f, -0.176336f, 0.797829f, 0.242705f, 0.569020f, 0.370588f, 0.212353f, -0.176336f, 0.797829f, 0.242705f, 0.553922f, 0.377451f, 0.208824f, 0.000000f, 0.797829f, 0.300000f, 0.553922f, 0.377451f, 0.208824f, -0.285317f, 0.797829f, -0.092705f, 0.553922f, 0.377451f, 0.208824f, 0.000000f, 0.797829f, 0.300000f, 0.573333f, 0.378431f, 0.212353f, 0.176336f, 0.797829f, 0.242705f, 0.573333f, 0.378431f, 0.212353f, -0.285317f, 0.797829f, -0.092705f, 0.573333f, 0.378431f, 0.212353f, 0.176336f, 0.797829f, 0.242705f, 0.570392f, 0.390588f, 0.216078f, 0.285317f, 0.797829f, 0.092705f, 0.570392f, 0.390588f, 0.216078f, -0.285317f, 0.797829f, -0.092705f, 0.570392f, 0.390588f, 0.216078f, -0.285317f, 0.797829f, -0.092705f, 0.560588f, 0.394118f, 0.202745f, -0.176335f, 0.797829f, -0.242705f, 0.560588f, 0.394118f, 0.202745f, -0.176335f, -0.002171f, -0.242705f, 0.560588f, 0.394118f, 0.202745f, -0.176335f, 0.797829f, -0.242705f, 0.551176f, 0.391765f, 0.212941f, 0.000000f, 0.797829f, -0.300000f, 0.551176f, 0.391765f, 0.212941f, 0.000000f, -0.002171f, -0.300000f, 0.551176f, 0.391765f, 0.212941f, -0.176335f, -0.002171f, -0.242705f, 0.558039f, 0.376078f, 0.219020f, 0.000000f, -0.002171f, -0.300000f, 0.558039f, 0.376078f, 0.219020f, 0.176336f, -0.002171f, -0.242705f, 0.558039f, 0.376078f, 0.219020f, 0.176336f, -0.002171f, -0.242705f, 0.563529f, 0.390784f, 0.204902f, 0.285317f, -0.002171f, -0.092705f, 0.563529f, 0.390784f, 0.204902f, -0.176335f, -0.002171f, -0.242705f, 0.563529f, 0.390784f, 0.204902f, 0.285317f, -0.002171f, -0.092705f, 0.550000f, 0.394118f, 0.219608f, 0.285317f, -0.002171f, 0.092705f, 0.550000f, 0.394118f, 0.219608f, -0.176335f, -0.002171f, -0.242705f, 0.550000f, 0.394118f, 0.219608f, 0.285317f, -0.002171f, 0.092705f, 0.563529f, 0.379608f, 0.205686f, 0.176336f, -0.002171f, 0.242705f, 0.563529f, 0.379608f, 0.205686f, 0.000000f, -0.002171f, 0.300000f, 0.563529f, 0.379608f, 0.205686f, 0.000000f, -0.002171f, 0.300000f, 0.562941f, 0.386471f, 0.218627f, -0.176336f, -0.002171f, 0.242705f, 0.562941f, 0.386471f, 0.218627f, -0.285317f, -0.002171f, 0.092705f, 0.562941f, 0.386471f, 0.218627f, -0.285317f, -0.002171f, 0.092705f, 0.550588f, 0.375490f, 0.220784f, -0.285317f, -0.002171f, -0.092705f, 0.550588f, 0.375490f, 0.220784f, -0.176335f, -0.002171f, -0.242705f, 0.550588f, 0.375490f, 0.220784f, 0.285317f, -0.002171f, 0.092705f, 0.565882f, 0.384314f, 0.218431f, 0.000000f, -0.002171f, 0.300000f, 0.565882f, 0.384314f, 0.218431f, -0.176335f, -0.002171f, -0.242705f, 0.565882f, 0.384314f, 0.218431f
    };
    item oilCan(oilCanVertices, loadTexture("assets/images/oilCanIcon.png"), vec2(0.25f), vec3(0.75f));
    vector<float> batteryVertices{
        0.016744f, 0.050000f, 0.353618f, 0.992157f, 0.300784f, 0.347059f, 0.016744f, -0.050000f, 0.053618f, 0.992157f, 0.300784f, 0.347059f, 0.016744f, -0.050000f, 0.353618f, 0.992157f, 0.300784f, 0.347059f, 0.016744f, 0.050000f, 0.053618f, 1.025882f, 0.353333f, 0.340784f, 0.216744f, -0.050000f, 0.053618f, 1.025882f, 0.353333f, 0.340784f, 0.016744f, -0.050000f, 0.053618f, 1.025882f, 0.353333f, 0.340784f, 0.216744f, 0.050000f, 0.053618f, 0.997647f, 0.276471f, 0.289804f, 0.216744f, -0.050000f, 0.353618f, 0.997647f, 0.276471f, 0.289804f, 0.216744f, -0.050000f, 0.053618f, 0.997647f, 0.276471f, 0.289804f, 0.216744f, 0.050000f, 0.353618f, 1.022745f, 0.351765f, 0.321176f, 0.016744f, -0.050000f, 0.353618f, 1.022745f, 0.351765f, 0.321176f, 0.216744f, -0.050000f, 0.353618f, 1.022745f, 0.351765f, 0.321176f, 0.216744f, -0.050000f, 0.053618f, 0.991373f, 0.309412f, 0.303137f, 0.016744f, -0.050000f, 0.353618f, 0.991373f, 0.309412f, 0.303137f, 0.016744f, -0.050000f, 0.053618f, 0.991373f, 0.309412f, 0.303137f, 0.016744f, 0.050000f, 0.053618f, 1.046275f, 0.318039f, 0.263137f, 0.216744f, 0.050000f, 0.353618f, 1.046275f, 0.318039f, 0.263137f, 0.216744f, 0.050000f, 0.053618f, 1.046275f, 0.318039f, 0.263137f, 0.016744f, 0.050000f, 0.353618f, 0.960784f, 0.340000f, 0.264706f, 0.016744f, 0.050000f, 0.053618f, 0.960784f, 0.340000f, 0.264706f, 0.016744f, -0.050000f, 0.053618f, 0.960784f, 0.340000f, 0.264706f, 0.016744f, 0.050000f, 0.053618f, 1.058823f, 0.332157f, 0.280392f, 0.216744f, 0.050000f, 0.053618f, 1.058823f, 0.332157f, 0.280392f, 0.216744f, -0.050000f, 0.053618f, 1.058823f, 0.332157f, 0.280392f, 0.216744f, 0.050000f, 0.053618f, 0.989804f, 0.309412f, 0.277255f, 0.216744f, 0.050000f, 0.353618f, 0.989804f, 0.309412f, 0.277255f, 0.216744f, -0.050000f, 0.353618f, 0.989804f, 0.309412f, 0.277255f, 0.216744f, 0.050000f, 0.353618f, 0.996863f, 0.285882f, 0.325098f, 0.016744f, 0.050000f, 0.353618f, 0.996863f, 0.285882f, 0.325098f, 0.016744f, -0.050000f, 0.353618f, 0.996863f, 0.285882f, 0.325098f, 0.216744f, -0.050000f, 0.053618f, 1.048627f, 0.267059f, 0.290588f, 0.216744f, -0.050000f, 0.353618f, 1.048627f, 0.267059f, 0.290588f, 0.016744f, -0.050000f, 0.353618f, 1.048627f, 0.267059f, 0.290588f, 0.016744f, 0.050000f, 0.053618f, 1.044706f, 0.331373f, 0.338431f, 0.016744f, 0.050000f, 0.353618f, 1.044706f, 0.331373f, 0.338431f, 0.216744f, 0.050000f, 0.353618f, 1.044706f, 0.331373f, 0.338431f, 0.016744f, -0.150000f, -0.148442f, 0.970196f, 0.267843f, 0.273333f, 0.016744f, 0.150000f, -0.248442f, 0.970196f, 0.267843f, 0.273333f, 0.016744f, -0.150000f, -0.248442f, 0.970196f, 0.267843f, 0.273333f, 0.016744f, 0.150000f, -0.148442f, 1.050196f, 0.260784f, 0.308627f, 0.216744f, 0.150000f, -0.248442f, 1.050196f, 0.260784f, 0.308627f, 0.016744f, 0.150000f, -0.248442f, 1.050196f, 0.260784f, 0.308627f, 0.216744f, 0.150000f, -0.148442f, 1.022745f, 0.343922f, 0.275686f, 0.216744f, -0.150000f, -0.248442f, 1.022745f, 0.343922f, 0.275686f, 0.216744f, 0.150000f, -0.248442f, 1.022745f, 0.343922f, 0.275686f, 0.216744f, -0.150000f, -0.148442f, 1.032157f, 0.281961f, 0.331373f, 0.016744f, -0.150000f, -0.248442f, 1.032157f, 0.281961f, 0.331373f, 0.216744f, -0.150000f, -0.248442f, 1.032157f, 0.281961f, 0.331373f, 0.216744f, 0.150000f, -0.248442f, 1.006274f, 0.267843f, 0.275686f, 0.016744f, -0.150000f, -0.248442f, 1.006274f, 0.267843f, 0.275686f, 0.016744f, 0.150000f, -0.248442f, 1.006274f, 0.267843f, 0.275686f, 0.016744f, 0.150000f, -0.148442f, 1.026667f, 0.278039f, 0.352549f, 0.216744f, -0.150000f, -0.148442f, 1.026667f, 0.278039f, 0.352549f, 0.216744f, 0.150000f, -0.148442f, 1.026667f, 0.278039f, 0.352549f, 0.016744f, -0.150000f, -0.148442f, 1.036863f, 0.285098f, 0.328235f, 0.016744f, 0.150000f, -0.148442f, 1.036863f, 0.285098f, 0.328235f, 0.016744f, 0.150000f, -0.248442f, 1.036863f, 0.285098f, 0.328235f, 0.016744f, 0.150000f, -0.148442f, 1.029804f, 0.336078f, 0.272549f, 0.216744f, 0.150000f, -0.148442f, 1.029804f, 0.336078f, 0.272549f, 0.216744f, 0.150000f, -0.248442f, 1.029804f, 0.336078f, 0.272549f, 0.216744f, 0.150000f, -0.148442f, 1.057255f, 0.349412f, 0.332157f, 0.216744f, -0.150000f, -0.148442f, 1.057255f, 0.349412f, 0.332157f, 0.216744f, -0.150000f, -0.248442f, 1.057255f, 0.349412f, 0.332157f, 0.216744f, -0.150000f, -0.148442f, 1.010196f, 0.286667f, 0.265490f, 0.016744f, -0.150000f, -0.148442f, 1.010196f, 0.286667f, 0.265490f, 0.016744f, -0.150000f, -0.248442f, 1.010196f, 0.286667f, 0.265490f, 0.216744f, 0.150000f, -0.248442f, 0.978039f, 0.300784f, 0.328235f, 0.216744f, -0.150000f, -0.248442f, 0.978039f, 0.300784f, 0.328235f, 0.016744f, -0.150000f, -0.248442f, 0.978039f, 0.300784f, 0.328235f, 0.016744f, 0.150000f, -0.148442f, 0.992941f, 0.270980f, 0.303922f, 0.016744f, -0.150000f, -0.148442f, 0.992941f, 0.270980f, 0.303922f, 0.216744f, -0.150000f, -0.148442f, 0.992941f, 0.270980f, 0.303922f, 0.016744f, 0.050000f, -0.048442f, 0.971765f, 0.358039f, 0.348627f, 0.016744f, -0.050000f, -0.348442f, 0.971765f, 0.358039f, 0.348627f, 0.016744f, -0.050000f, -0.048442f, 0.971765f, 0.358039f, 0.348627f, 0.016744f, 0.050000f, -0.348442f, 1.046275f, 0.275686f, 0.348627f, 0.216744f, -0.050000f, -0.348442f, 1.046275f, 0.275686f, 0.348627f, 0.016744f, -0.050000f, -0.348442f, 1.046275f, 0.275686f, 0.348627f, 0.216744f, 0.050000f, -0.348442f, 0.967059f, 0.353333f, 0.315686f, 0.216744f, -0.050000f, -0.048442f, 0.967059f, 0.353333f, 0.315686f, 0.216744f, -0.050000f, -0.348442f, 0.967059f, 0.353333f, 0.315686f, 0.216744f, 0.050000f, -0.048442f, 0.999216f, 0.323529f, 0.271765f, 0.016744f, -0.050000f, -0.048442f, 0.999216f, 0.323529f, 0.271765f, 0.216744f, -0.050000f, -0.048442f, 0.999216f, 0.323529f, 0.271765f, 0.216744f, -0.050000f, -0.348442f, 1.028235f, 0.282745f, 0.270196f, 0.016744f, -0.050000f, -0.048442f, 1.028235f, 0.282745f, 0.270196f, 0.016744f, -0.050000f, -0.348442f, 1.028235f, 0.282745f, 0.270196f, 0.016744f, 0.050000f, -0.348442f, 0.967843f, 0.329020f, 0.274902f, 0.216744f, 0.050000f, -0.048442f, 0.967843f, 0.329020f, 0.274902f, 0.216744f, 0.050000f, -0.348442f, 0.967843f, 0.329020f, 0.274902f, 0.016744f, 0.050000f, -0.048442f, 1.001569f, 0.302353f, 0.350196f, 0.016744f, 0.050000f, -0.348442f, 1.001569f, 0.302353f, 0.350196f, 0.016744f, -0.050000f, -0.348442f, 1.001569f, 0.302353f, 0.350196f, 0.016744f, 0.050000f, -0.348442f, 0.975686f, 0.319608f, 0.318824f, 0.216744f, 0.050000f, -0.348442f, 0.975686f, 0.319608f, 0.318824f, 0.216744f, -0.050000f, -0.348442f, 0.975686f, 0.319608f, 0.318824f, 0.216744f, 0.050000f, -0.348442f, 1.050980f, 0.299216f, 0.314118f, 0.216744f, 0.050000f, -0.048442f, 1.050980f, 0.299216f, 0.314118f, 0.216744f, -0.050000f, -0.048442f, 1.050980f, 0.299216f, 0.314118f, 0.216744f, 0.050000f, -0.048442f, 0.984314f, 0.265490f, 0.260000f, 0.016744f, 0.050000f, -0.048442f, 0.984314f, 0.265490f, 0.260000f, 0.016744f, -0.050000f, -0.048442f, 0.984314f, 0.265490f, 0.260000f, 0.216744f, -0.050000f, -0.348442f, 1.012549f, 0.312549f, 0.336863f, 0.216744f, -0.050000f, -0.048442f, 1.012549f, 0.312549f, 0.336863f, 0.016744f, -0.050000f, -0.048442f, 1.012549f, 0.312549f, 0.336863f, 0.016744f, 0.050000f, -0.348442f, 0.978823f, 0.265490f, 0.275686f, 0.016744f, 0.050000f, -0.048442f, 0.978823f, 0.265490f, 0.275686f, 0.216744f, 0.050000f, -0.048442f, 0.978823f, 0.265490f, 0.275686f, 0.000000f, 1.000000f, -0.398198f, 0.999216f, 0.286667f, 0.313333f, 0.117557f, -1.000000f, -0.360001f, 0.999216f, 0.286667f, 0.313333f, 0.000000f, -1.000000f, -0.398198f, 0.999216f, 0.286667f, 0.313333f, 0.117557f, 1.000000f, -0.360001f, 0.993725f, 0.260000f, 0.277255f, 0.190211f, -1.000000f, -0.260001f, 0.993725f, 0.260000f, 0.277255f, 0.117557f, -1.000000f, -0.360001f, 0.993725f, 0.260000f, 0.277255f, 0.190211f, 1.000000f, -0.260001f, 0.996863f, 0.349412f, 0.343922f, 0.190211f, -1.000000f, -0.136394f, 0.996863f, 0.349412f, 0.343922f, 0.190211f, -1.000000f, -0.260001f, 0.996863f, 0.349412f, 0.343922f, 0.190211f, 1.000000f, -0.136394f, 1.021961f, 0.273333f, 0.261569f, 0.117557f, -1.000000f, -0.036394f, 1.021961f, 0.273333f, 0.261569f, 0.190211f, -1.000000f, -0.136394f, 1.021961f, 0.273333f, 0.261569f, 0.117557f, 1.000000f, -0.036394f, 1.046275f, 0.324314f, 0.273333f, -0.000000f, -1.000000f, 0.001802f, 1.046275f, 0.324314f, 0.273333f, 0.117557f, -1.000000f, -0.036394f, 1.046275f, 0.324314f, 0.273333f, -0.000000f, 1.000000f, 0.001802f, 1.033726f, 0.262353f, 0.261569f, -0.117557f, -1.000000f, -0.036394f, 1.033726f, 0.262353f, 0.261569f, -0.000000f, -1.000000f, 0.001802f, 1.033726f, 0.262353f, 0.261569f, -0.117557f, 1.000000f, -0.036394f, 0.985882f, 0.322745f, 0.333725f, -0.190211f, -1.000000f, -0.136394f, 0.985882f, 0.322745f, 0.333725f, -0.117557f, -1.000000f, -0.036394f, 0.985882f, 0.322745f, 0.333725f, -0.190211f, 1.000000f, -0.136394f, 1.049412f, 0.295294f, 0.265490f, -0.190211f, -1.000000f, -0.260001f, 1.049412f, 0.295294f, 0.265490f, -0.190211f, -1.000000f, -0.136394f, 1.049412f, 0.295294f, 0.265490f, 0.000000f, 1.000000f, -0.398198f, 0.999216f, 0.265490f, 0.356471f, -0.190211f, 1.000000f, -0.260001f, 0.999216f, 0.265490f, 0.356471f, 0.117557f, 1.000000f, -0.036394f, 0.999216f, 0.265490f, 0.356471f, -0.190211f, 1.000000f, -0.260001f, 0.960784f, 0.353333f, 0.332157f, -0.117557f, -1.000000f, -0.360001f, 0.960784f, 0.353333f, 0.332157f, -0.190211f, -1.000000f, -0.260001f, 0.960784f, 0.353333f, 0.332157f, -0.117557f, 1.000000f, -0.360001f, 1.038431f, 0.286667f, 0.330588f, 0.000000f, -1.000000f, -0.398198f, 1.038431f, 0.286667f, 0.330588f, -0.117557f, -1.000000f, -0.360001f, 1.038431f, 0.286667f, 0.330588f, 0.190211f, -1.000000f, -0.136394f, 1.034510f, 0.312549f, 0.335294f, -0.000000f, -1.000000f, 0.001802f, 1.034510f, 0.312549f, 0.335294f, -0.190211f, -1.000000f, -0.136394f, 1.034510f, 0.312549f, 0.335294f, 0.000000f, 1.000000f, -0.398198f, 1.027451f, 0.274902f, 0.321176f, 0.117557f, 1.000000f, -0.360001f, 1.027451f, 0.274902f, 0.321176f, 0.117557f, -1.000000f, -0.360001f, 1.027451f, 0.274902f, 0.321176f, 0.117557f, 1.000000f, -0.360001f, 1.043137f, 0.331373f, 0.296078f, 0.190211f, 1.000000f, -0.260001f, 1.043137f, 0.331373f, 0.296078f, 0.190211f, -1.000000f, -0.260001f, 1.043137f, 0.331373f, 0.296078f, 0.190211f, 1.000000f, -0.260001f, 1.016471f, 0.302353f, 0.318039f, 0.190211f, 1.000000f, -0.136394f, 1.016471f, 0.302353f, 0.318039f, 0.190211f, -1.000000f, -0.136394f, 1.016471f, 0.302353f, 0.318039f, 0.190211f, 1.000000f, -0.136394f, 1.019608f, 0.283529f, 0.326667f, 0.117557f, 1.000000f, -0.036394f, 1.019608f, 0.283529f, 0.326667f, 0.117557f, -1.000000f, -0.036394f, 1.019608f, 0.283529f, 0.326667f, 0.117557f, 1.000000f, -0.036394f, 0.968627f, 0.321961f, 0.332941f, -0.000000f, 1.000000f, 0.001802f, 0.968627f, 0.321961f, 0.332941f, -0.000000f, -1.000000f, 0.001802f, 0.968627f, 0.321961f, 0.332941f, -0.000000f, 1.000000f, 0.001802f, 0.963137f, 0.268627f, 0.267059f, -0.117557f, 1.000000f, -0.036394f, 0.963137f, 0.268627f, 0.267059f, -0.117557f, -1.000000f, -0.036394f, 0.963137f, 0.268627f, 0.267059f, -0.117557f, 1.000000f, -0.036394f, 1.010980f, 0.330588f, 0.326667f, -0.190211f, 1.000000f, -0.136394f, 1.010980f, 0.330588f, 0.326667f, -0.190211f, -1.000000f, -0.136394f, 1.010980f, 0.330588f, 0.326667f, -0.190211f, 1.000000f, -0.136394f, 0.964706f, 0.288235f, 0.341569f, -0.190211f, 1.000000f, -0.260001f, 0.964706f, 0.288235f, 0.341569f, -0.190211f, -1.000000f, -0.260001f, 0.964706f, 0.288235f, 0.341569f, 0.190211f, 1.000000f, -0.260001f, 0.996078f, 0.332941f, 0.263137f, 0.117557f, 1.000000f, -0.360001f, 0.996078f, 0.332941f, 0.263137f, 0.000000f, 1.000000f, -0.398198f, 0.996078f, 0.332941f, 0.263137f, 0.000000f, 1.000000f, -0.398198f, 1.040000f, 0.340784f, 0.336863f, -0.117557f, 1.000000f, -0.360001f, 1.040000f, 0.340784f, 0.336863f, -0.190211f, 1.000000f, -0.260001f, 1.040000f, 0.340784f, 0.336863f, -0.190211f, 1.000000f, -0.260001f, 0.978823f, 0.274118f, 0.293725f, -0.190211f, 1.000000f, -0.136394f, 0.978823f, 0.274118f, 0.293725f, -0.117557f, 1.000000f, -0.036394f, 0.978823f, 0.274118f, 0.293725f, -0.117557f, 1.000000f, -0.036394f, 1.026667f, 0.346274f, 0.338431f, -0.000000f, 1.000000f, 0.001802f, 1.026667f, 0.346274f, 0.338431f, -0.190211f, 1.000000f, -0.260001f, 1.026667f, 0.346274f, 0.338431f, -0.000000f, 1.000000f, 0.001802f, 0.980392f, 0.287451f, 0.301569f, 0.117557f, 1.000000f, -0.036394f, 0.980392f, 0.287451f, 0.301569f, -0.190211f, 1.000000f, -0.260001f, 0.980392f, 0.287451f, 0.301569f, 0.117557f, 1.000000f, -0.036394f, 1.033726f, 0.261569f, 0.358039f, 0.190211f, 1.000000f, -0.136394f, 1.033726f, 0.261569f, 0.358039f, 0.190211f, 1.000000f, -0.260001f, 1.033726f, 0.261569f, 0.358039f, 0.190211f, 1.000000f, -0.260001f, 0.992941f, 0.342353f, 0.332941f, 0.000000f, 1.000000f, -0.398198f, 0.992941f, 0.342353f, 0.332941f, 0.117557f, 1.000000f, -0.036394f, 0.992941f, 0.342353f, 0.332941f, -0.190211f, 1.000000f, -0.260001f, 1.027451f, 0.295294f, 0.286667f, -0.117557f, 1.000000f, -0.360001f, 1.027451f, 0.295294f, 0.286667f, -0.117557f, -1.000000f, -0.360001f, 1.027451f, 0.295294f, 0.286667f, -0.117557f, 1.000000f, -0.360001f, 0.967843f, 0.263137f, 0.281176f, 0.000000f, 1.000000f, -0.398198f, 0.967843f, 0.263137f, 0.281176f, 0.000000f, -1.000000f, -0.398198f, 0.967843f, 0.263137f, 0.281176f, -0.117557f, -1.000000f, -0.360001f, 0.966274f, 0.327451f, 0.270196f, 0.000000f, -1.000000f, -0.398198f, 0.966274f, 0.327451f, 0.270196f, 0.117557f, -1.000000f, -0.360001f, 0.966274f, 0.327451f, 0.270196f, 0.117557f, -1.000000f, -0.360001f, 1.022745f, 0.350980f, 0.326667f, 0.190211f, -1.000000f, -0.260001f, 1.022745f, 0.350980f, 0.326667f, 0.190211f, -1.000000f, -0.136394f, 1.022745f, 0.350980f, 0.326667f, 0.190211f, -1.000000f, -0.136394f, 1.056471f, 0.269412f, 0.300784f, 0.117557f, -1.000000f, -0.036394f, 1.056471f, 0.269412f, 0.300784f, -0.000000f, -1.000000f, 0.001802f, 1.056471f, 0.269412f, 0.300784f, -0.000000f, -1.000000f, 0.001802f, 0.980392f, 0.292941f, 0.267059f, -0.117557f, -1.000000f, -0.036394f, 0.980392f, 0.292941f, 0.267059f, -0.190211f, -1.000000f, -0.136394f, 0.980392f, 0.292941f, 0.267059f, -0.190211f, -1.000000f, -0.136394f, 1.007059f, 0.310980f, 0.320392f, -0.190211f, -1.000000f, -0.260001f, 1.007059f, 0.310980f, 0.320392f, -0.117557f, -1.000000f, -0.360001f, 1.007059f, 0.310980f, 0.320392f, -0.117557f, -1.000000f, -0.360001f, 0.960784f, 0.327451f, 0.261569f, 0.117557f, -1.000000f, -0.360001f, 0.960784f, 0.327451f, 0.261569f, -0.190211f, -1.000000f, -0.136394f, 0.960784f, 0.327451f, 0.261569f, 0.117557f, -1.000000f, -0.360001f, 1.036078f, 0.262353f, 0.309412f, 0.190211f, -1.000000f, -0.136394f, 1.036078f, 0.262353f, 0.309412f, -0.190211f, -1.000000f, -0.136394f, 1.036078f, 0.262353f, 0.309412f, 0.000000f, 1.000000f, 0.000009f, 0.975686f, 0.289804f, 0.295294f, 0.117557f, -1.000000f, 0.038206f, 0.975686f, 0.289804f, 0.295294f, 0.000000f, -1.000000f, 0.000009f, 0.975686f, 0.289804f, 0.295294f, 0.117557f, 1.000000f, 0.038206f, 1.053333f, 0.293725f, 0.309412f, 0.190211f, -1.000000f, 0.138206f, 1.053333f, 0.293725f, 0.309412f, 0.117557f, -1.000000f, 0.038206f, 1.053333f, 0.293725f, 0.309412f, 0.190211f, 1.000000f, 0.138206f, 1.041569f, 0.342353f, 0.324314f, 0.190211f, -1.000000f, 0.261813f, 1.041569f, 0.342353f, 0.324314f, 0.190211f, -1.000000f, 0.138206f, 1.041569f, 0.342353f, 0.324314f, 0.190211f, 1.000000f, 0.261813f, 1.002353f, 0.356471f, 0.270980f, 0.117557f, -1.000000f, 0.361813f, 1.002353f, 0.356471f, 0.270980f, 0.190211f, -1.000000f, 0.261813f, 1.002353f, 0.356471f, 0.270980f, 0.117557f, 1.000000f, 0.361813f, 0.964706f, 0.347059f, 0.311765f, -0.000000f, -1.000000f, 0.400009f, 0.964706f, 0.347059f, 0.311765f, 0.117557f, -1.000000f, 0.361813f, 0.964706f, 0.347059f, 0.311765f, -0.000000f, 1.000000f, 0.400009f, 0.992157f, 0.284314f, 0.336078f, -0.117557f, -1.000000f, 0.361813f, 0.992157f, 0.284314f, 0.336078f, -0.000000f, -1.000000f, 0.400009f, 0.992157f, 0.284314f, 0.336078f, -0.117557f, 1.000000f, 0.361813f, 1.014118f, 0.343137f, 0.279608f, -0.190211f, -1.000000f, 0.261813f, 1.014118f, 0.343137f, 0.279608f, -0.117557f, -1.000000f, 0.361813f, 1.014118f, 0.343137f, 0.279608f, -0.190211f, 1.000000f, 0.261813f, 0.960000f, 0.356471f, 0.338431f, -0.190211f, -1.000000f, 0.138206f, 0.960000f, 0.356471f, 0.338431f, -0.190211f, -1.000000f, 0.261813f, 0.960000f, 0.356471f, 0.338431f, 0.000000f, 1.000000f, 0.000009f, 1.014118f, 0.298431f, 0.282745f, -0.190211f, 1.000000f, 0.138206f, 1.014118f, 0.298431f, 0.282745f, 0.117557f, 1.000000f, 0.361813f, 1.014118f, 0.298431f, 0.282745f, -0.190211f, 1.000000f, 0.138206f, 1.011765f, 0.325882f, 0.334510f, -0.117557f, -1.000000f, 0.038206f, 1.011765f, 0.325882f, 0.334510f, -0.190211f, -1.000000f, 0.138206f, 1.011765f, 0.325882f, 0.334510f, -0.117557f, 1.000000f, 0.038206f, 0.962353f, 0.281961f, 0.343137f, 0.000000f, -1.000000f, 0.000009f, 0.962353f, 0.281961f, 0.343137f, -0.117557f, -1.000000f, 0.038206f, 0.962353f, 0.281961f, 0.343137f, 0.190211f, -1.000000f, 0.261813f, 1.023529f, 0.317255f, 0.333725f, -0.000000f, -1.000000f, 0.400009f, 1.023529f, 0.317255f, 0.333725f, -0.190211f, -1.000000f, 0.261813f, 1.023529f, 0.317255f, 0.333725f, 0.000000f, 1.000000f, 0.000009f, 0.971765f, 0.350980f, 0.266275f, 0.117557f, 1.000000f, 0.038206f, 0.971765f, 0.350980f, 0.266275f, 0.117557f, -1.000000f, 0.038206f, 0.971765f, 0.350980f, 0.266275f, 0.117557f, 1.000000f, 0.038206f, 0.991373f, 0.317255f, 0.307059f, 0.190211f, 1.000000f, 0.138206f, 0.991373f, 0.317255f, 0.307059f, 0.190211f, -1.000000f, 0.138206f, 0.991373f, 0.317255f, 0.307059f, 0.190211f, 1.000000f, 0.138206f, 1.021961f, 0.347843f, 0.278824f, 0.190211f, 1.000000f, 0.261813f, 1.021961f, 0.347843f, 0.278824f, 0.190211f, -1.000000f, 0.261813f, 1.021961f, 0.347843f, 0.278824f, 0.190211f, 1.000000f, 0.261813f, 1.019608f, 0.334510f, 0.274902f, 0.117557f, 1.000000f, 0.361813f, 1.019608f, 0.334510f, 0.274902f, 0.117557f, -1.000000f, 0.361813f, 1.019608f, 0.334510f, 0.274902f, 0.117557f, 1.000000f, 0.361813f, 0.989020f, 0.354902f, 0.287451f, -0.000000f, 1.000000f, 0.400009f, 0.989020f, 0.354902f, 0.287451f, -0.000000f, -1.000000f, 0.400009f, 0.989020f, 0.354902f, 0.287451f, -0.000000f, 1.000000f, 0.400009f, 1.045490f, 0.350196f, 0.347059f, -0.117557f, 1.000000f, 0.361813f, 1.045490f, 0.350196f, 0.347059f, -0.117557f, -1.000000f, 0.361813f, 1.045490f, 0.350196f, 0.347059f, -0.117557f, 1.000000f, 0.361813f, 0.960784f, 0.281961f, 0.321961f, -0.190211f, 1.000000f, 0.261813f, 0.960784f, 0.281961f, 0.321961f, -0.190211f, -1.000000f, 0.261813f, 0.960784f, 0.281961f, 0.321961f, -0.190211f, 1.000000f, 0.261813f, 0.963922f, 0.355686f, 0.294510f, -0.190211f, 1.000000f, 0.138206f, 0.963922f, 0.355686f, 0.294510f, -0.190211f, -1.000000f, 0.138206f, 0.963922f, 0.355686f, 0.294510f, 0.190211f, 1.000000f, 0.138206f, 1.007059f, 0.336078f, 0.297647f, 0.117557f, 1.000000f, 0.038206f, 1.007059f, 0.336078f, 0.297647f, 0.000000f, 1.000000f, 0.000009f, 1.007059f, 0.336078f, 0.297647f, 0.000000f, 1.000000f, 0.000009f, 1.016471f, 0.323529f, 0.325098f, -0.117557f, 1.000000f, 0.038206f, 1.016471f, 0.323529f, 0.325098f, -0.190211f, 1.000000f, 0.138206f, 1.016471f, 0.323529f, 0.325098f, -0.190211f, 1.000000f, 0.138206f, 1.011765f, 0.267843f, 0.271765f, -0.190211f, 1.000000f, 0.261813f, 1.011765f, 0.267843f, 0.271765f, -0.117557f, 1.000000f, 0.361813f, 1.011765f, 0.267843f, 0.271765f, -0.117557f, 1.000000f, 0.361813f, 0.991373f, 0.298431f, 0.294510f, -0.000000f, 1.000000f, 0.400009f, 0.991373f, 0.298431f, 0.294510f, -0.190211f, 1.000000f, 0.138206f, 0.991373f, 0.298431f, 0.294510f, -0.000000f, 1.000000f, 0.400009f, 1.000784f, 0.358039f, 0.289020f, 0.117557f, 1.000000f, 0.361813f, 1.000784f, 0.358039f, 0.289020f, -0.190211f, 1.000000f, 0.138206f, 1.000784f, 0.358039f, 0.289020f, 0.117557f, 1.000000f, 0.361813f, 1.004706f, 0.292941f, 0.266275f, 0.190211f, 1.000000f, 0.261813f, 1.004706f, 0.292941f, 0.266275f, 0.190211f, 1.000000f, 0.138206f, 1.004706f, 0.292941f, 0.266275f, 0.190211f, 1.000000f, 0.138206f, 1.001569f, 0.315686f, 0.342353f, 0.000000f, 1.000000f, 0.000009f, 1.001569f, 0.315686f, 0.342353f, 0.117557f, 1.000000f, 0.361813f, 1.001569f, 0.315686f, 0.342353f, -0.190211f, 1.000000f, 0.138206f, 1.055686f, 0.312549f, 0.294510f, -0.117557f, 1.000000f, 0.038206f, 1.055686f, 0.312549f, 0.294510f, -0.117557f, -1.000000f, 0.038206f, 1.055686f, 0.312549f, 0.294510f, -0.117557f, 1.000000f, 0.038206f, 0.989020f, 0.328235f, 0.324314f, 0.000000f, 1.000000f, 0.000009f, 0.989020f, 0.328235f, 0.324314f, 0.000000f, -1.000000f, 0.000009f, 0.989020f, 0.328235f, 0.324314f, -0.117557f, -1.000000f, 0.038206f, 1.051765f, 0.329804f, 0.270980f, 0.000000f, -1.000000f, 0.000009f, 1.051765f, 0.329804f, 0.270980f, 0.117557f, -1.000000f, 0.038206f, 1.051765f, 0.329804f, 0.270980f, 0.117557f, -1.000000f, 0.038206f, 0.963922f, 0.290588f, 0.318824f, 0.190211f, -1.000000f, 0.138206f, 0.963922f, 0.290588f, 0.318824f, 0.190211f, -1.000000f, 0.261813f, 0.963922f, 0.290588f, 0.318824f, 0.190211f, -1.000000f, 0.261813f, 1.049412f, 0.296078f, 0.280392f, 0.117557f, -1.000000f, 0.361813f, 1.049412f, 0.296078f, 0.280392f, -0.000000f, -1.000000f, 0.400009f, 1.049412f, 0.296078f, 0.280392f, -0.000000f, -1.000000f, 0.400009f, 0.960784f, 0.314902f, 0.267843f, -0.117557f, -1.000000f, 0.361813f, 0.960784f, 0.314902f, 0.267843f, -0.190211f, -1.000000f, 0.261813f, 0.960784f, 0.314902f, 0.267843f, -0.190211f, -1.000000f, 0.261813f, 1.041569f, 0.278039f, 0.329020f, -0.190211f, -1.000000f, 0.138206f, 1.041569f, 0.278039f, 0.329020f, -0.117557f, -1.000000f, 0.038206f, 1.041569f, 0.278039f, 0.329020f, -0.117557f, -1.000000f, 0.038206f, 0.999216f, 0.325098f, 0.314902f, 0.117557f, -1.000000f, 0.038206f, 0.999216f, 0.325098f, 0.314902f, -0.190211f, -1.000000f, 0.261813f, 0.999216f, 0.325098f, 0.314902f, 0.117557f, -1.000000f, 0.038206f, 0.989804f, 0.302353f, 0.355686f, 0.190211f, -1.000000f, 0.261813f, 0.989804f, 0.302353f, 0.355686f, -0.190211f, -1.000000f, 0.261813f, 0.989804f, 0.302353f, 0.355686f
    };
    item battery(batteryVertices, loadTexture("assets/images/batteryIcon.png"), vec2(0.25f), vec3(0.25f));
    allItems[newVectorPos(&allItems)] = oilCan;
    allItems[newVectorPos(&allItems)] = battery;
}

void inventoryUIMainloop(){
    if(allSlots.size() == 0){ return; }
    for(int s = 0; s < SLOT_COUNT; s++){
        float xButtonDifference = (allButtons[allSlots[s].buttonIndex].maxX - allButtons[allSlots[s].buttonIndex].minX) * 0.1f;
        float yButtonDifference = (allButtons[allSlots[s].buttonIndex].maxY - allButtons[allSlots[s].buttonIndex].minY) * 0.1f;

        allTexts[allSlotTexts[s]].position.x = allButtons[allSlots[s].buttonIndex].minX + xButtonDifference;
        allTexts[allSlotTexts[s]].position.y = display_y - allButtons[allSlots[s].buttonIndex].maxY + yButtonDifference;
        allTexts[allSlotTexts[s]].displayedText = to_string(allSlots[s].itemQuantity);

        if(s > HOTBAR_COUNT - 1){
            if(allSlots[s].itemType > -1){
                if(!inventoryOpen){
                    allButtons[allSlots[s].buttonIconIndex].active = false;
                }
                if(inventoryOpen){
                    allButtons[allSlots[s].buttonIconIndex].active = true;
                }
            }
            if(!inventoryOpen){
                allTexts[allSlotTexts[s]].active = false;
            }
            if(inventoryOpen){
                allTexts[allSlotTexts[s]].active = true;
            }
        }
        int buttonIndex = allSlots[s].buttonIndex;
        if(allButtons[buttonIndex].mouseOver && inventoryOpen){
            allButtons[buttonIndex].colour = vec3(1.25f);
            if(s == currentSwappingIndex){
                allButtons[buttonIndex].colour *= vec3(1.0f, 0.2f, 0.2f);
            }
        }
        else{
            allButtons[buttonIndex].colour = vec3(1.0f);
            if(s == currentSwappingIndex){
                allButtons[buttonIndex].colour = vec3(1.0f, 0.2f, 0.2f);
            }
        }
    }
}

void inventoryMainloop(){
    if(!WorldGeneration.active){ return; }
    inventoryUIMainloop();
    entityInteractions();
    collectItems();
    givePlayerEntity();
    swapItems();
    if(checkKeyDown(interactKeyInv)){
        float distance = glm::distance(mainPlayer.position, mainBench.position);

        if(!inventoryOpen && distance > BENCH_DISTANCE){
            for(int s = HOTBAR_COUNT; s < SLOT_COUNT; s++){
                allButtons[allSlots[s].buttonIndex].active = true;
            }
            inventoryOpen = true;
            mainPlayer.canMove = false;
            mainPlayer.canMoveCamera = false;
            glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_NORMAL);
            return;
        }
        if(inventoryOpen){
            for(int s = HOTBAR_COUNT; s < SLOT_COUNT; s++){
                allButtons[allSlots[s].buttonIndex].active = false;
            }
            inventoryOpen = false;
            mainPlayer.canMove = true;
            mainPlayer.canMoveCamera = true;
            glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);
        }
    }
}

texture defaultTexture;
item::item(vector<float> modelVertices, texture buttonTexture, 
        vec2 itemButtonScale, vec3 itemModelScale){
    startIrregularColorBuilding(modelVertices, VAO, VBO, size);
    iconTexture = buttonTexture;
    modelScale = itemModelScale;
    buttonScale = itemButtonScale;
}

void item::render(){
    mat4 model = modelMatrix(modelPosition, modelRotation, modelScale);
    glUseProgram(playerShader);

	setMat4(playerShader, "model", model);
	setMat4(playerShader, "projection", projectionMatrix());
	setMat4(playerShader, "view", viewMatrix());

	setShaderVecThree(playerShader, "lightPos", lightPos);
	setShaderFloat(playerShader, "lightIntensity", lightIntensity);
	setShaderFloat(playerShader, "lightRadius", lightRadius);
	setShaderInt(playerShader, "useLight", 1);
	setShaderFloat(playerShader, "lowestLight", lowestLight);
    
	glBindVertexArray(VAO);
	glDrawArrays(GL_TRIANGLES, 0, size);
}

int item::createButtonIcon(int inventorySlotIndex){
    int newButton = createButton();
    allButtons[newButton].texture = iconTexture;
    allButtons[newButton].scale = buttonScale;
    allButtons[newButton].position = allSlots[inventorySlotIndex].buttonPos;
    allButtons[newButton].interactive = false;
    if(inventorySlotIndex > HOTBAR_COUNT - 1){
        if(!inventoryOpen){
            allButtons[newButton].active = false;
        }
    }
    allSlots[inventorySlotIndex].buttonIconIndex = newButton;
    return newButton;
}

void item::removeButton(int buttonIndex){
    allButtons[buttonIndex].active = false;
}

vector<item> allEntities;
void monsterItemDrops(monster &usedMonster){
    if(usedMonster.health > 0){
        return;
    }
    if(usedMonster.droppedItem){
        return;
    }
    // drop chance
    int random = randomInt(1, usedMonster.itemDropChance);
    if(random == 1){
        // dropped
        item newEntity = allItems[usedMonster.itemIndex];
        newEntity.modelPosition = usedMonster.position;
        newEntity.itemType = usedMonster.itemIndex;
        allEntities[newVectorPos(&allEntities)] = newEntity;
    }
    usedMonster.droppedItem = true;
}

void collectItems(){
    int eCount = allEntities.size();
    vector<int> deletedItems;
    for(int e = 0; e < eCount; e++){
        int dCount = deletedItems.size();
        bool deleted = false;
        for(int d = 0; d < dCount; d++){
            if(deletedItems[d] == e){
                deleted = true;
            }
        }
        if(deleted){
            continue;
        }

        vec3 ePos = allEntities[e].modelPosition;
        for(int e1 = 0; e1 < eCount; e1++){
            int dCount = deletedItems.size();
            bool deleted = false;
            for(int d = 0; d < dCount; d++){
                if(deletedItems[d] == e1){
                    deleted = true;
                }
            }
            if(deleted){
                continue;
            }

            if(e1 == e){
                continue;
            }
            if(allEntities[e].itemType != allEntities[e1].itemType){
                continue;
            }
            vec3 e1Pos = allEntities[e1].modelPosition;
            float distance = glm::distance(ePos, e1Pos);
            if(distance < ITEM_COLLECT_RADIUS){
                allEntities[e].quantity += allEntities[e1].quantity;
                deletedItems[newVectorPos(&deletedItems)] = e1;
            }
        }
    }

    int dCount = deletedItems.size();
    for(int d = dCount - 1; d > -1; d--){
        allEntities.erase(allEntities.begin() + deletedItems[d]);
    }
}

void entityInteractions(){
    int eCount = allEntities.size();
    for(int e = 0; e < eCount; e++){
        allEntities[e].render();
        allEntities[e].droppingInteraction();
        allEntities[e].modelPosition = entityColliders(allEntities[e].modelPosition);
    }
}

void item::droppingInteraction(){
    if(!dropping){
        return;
    }
    vec2 floorStart = vec2(droppingStart.x, droppingStart.z);
    vec2 floorCurrent = vec2(modelPosition.x, modelPosition.z);
    vec2 floorEnd = vec2(droppingEnd.x, droppingEnd.z);
    vec2 floorCenter = vec2(
        (floorStart.x + floorEnd.x) / 2.0f,
        (floorStart.y + floorEnd.y) / 2.0f
    );
    float bearing = radians(bearingTwo(floorCurrent, floorEnd));

    float distance = glm::distance(floorCurrent, floorCenter);
    float fullDistance = glm::distance(floorStart, floorCenter);
    float yMultiplier = distance / fullDistance;

    modelPosition.x += sin(bearing) * deltaTime * ENTITY_DROPPING_SPEED;
    modelPosition.y = droppingEnd.y + cos(radians(yMultiplier * 90.0f)) * ENTITY_DROPPING_MAX_HEIGHT;
    modelPosition.z += cos(bearing) * deltaTime * ENTITY_DROPPING_SPEED;

    distance = glm::distance(floorCurrent, floorEnd);
    if(distance < ITEM_CLOSEST_MOVEMENT){
        dropping = false;
    }
}

vec3 entityColliders(vec3 start){
    vec3 ePos = start;
    vec4 entityCollide = terrainColliders(ePos, ENTITY_COLLIDER_DISTANCE);
    float inMountain = (int) entityCollide.w;
    if(inMountain == 0.0f){
        if(ePos.y < ENTITY_COLLIDER_DISTANCE){
            ePos.y = ENTITY_COLLIDER_DISTANCE;
        }
    }
    if(inMountain > 0.0f){
        if(ePos.y < entityCollide.y){
            ePos.y = entityCollide.y;
        }
    }

    if(ePos.x < 0.0f + ENTITY_COLLIDER_DISTANCE){
		ePos.x = 0.0f + ENTITY_COLLIDER_DISTANCE;
	}
	if(ePos.x > currentPlanetScale.x - ENTITY_COLLIDER_DISTANCE){
		ePos.x = currentPlanetScale.x - ENTITY_COLLIDER_DISTANCE;
	}
	if(ePos.z > 0.0f - ENTITY_COLLIDER_DISTANCE){
		ePos.z = 0.0f - ENTITY_COLLIDER_DISTANCE;
	}
	if(ePos.z < -currentPlanetScale.y + ENTITY_COLLIDER_DISTANCE){
		ePos.z = -currentPlanetScale.y + ENTITY_COLLIDER_DISTANCE;
	}

    //int waste = 0; float wasteF = 0.0f; bool wasteB = false; bool wasteB2 = false;
    //buildCollisions(ePos, waste, wasteF, wasteB, wasteB2);
        
    return ePos;
}

vector<string> inventorySaveLine(){
    // return value only
    string invLine = "";
    string quantityLine = "";
    for(int s = 0; s < SLOT_COUNT; s++){
        invLine += to_string(allSlots[s].itemType);
        invLine += ",";
        
        quantityLine += to_string(allSlots[s].itemQuantity);
        quantityLine += ",";

        if(s != SLOT_COUNT - 1){
            invLine += " ";
            quantityLine += " ";
        }
    }
    return {invLine, quantityLine};
}

vector<string> entitySaveLines(){
    vector<string> returned;
    int eCount = allEntities.size();
    for(int e = 0; e < eCount; e++){
        string newLine = WorldGeneration.currentAreaPrefix + "Entity ";
        newLine += to_string(allEntities[e].modelPosition.x) + ", ";
        newLine += to_string(allEntities[e].modelPosition.y) + ", ";
        newLine += to_string(allEntities[e].modelPosition.z) + ", ";
        newLine += to_string(allEntities[e].itemType) + ", ";
        newLine += to_string(allEntities[e].quantity) + ",";
        returned[newVectorPos(&returned)] = newLine;
    }
    return returned;
}

void getEntities(){
    vector<string> allLines = readLines(WorldGeneration.worldLinesPath);
    int lCount = allLines.size();
    for(int l = 0; l < lCount; l++){
        string currentLine = allLines[l];
        if(contains(currentLine, WorldGeneration.currentAreaPrefix + "Entity")){
            vector<float> eInfo = getVectorFile(WorldGeneration.worldLinesPath, WorldGeneration.currentAreaPrefix + "Entity", l);
            item newEntity = allItems[(int) eInfo[3]];

            newEntity.modelPosition.x = eInfo[0];
            newEntity.modelPosition.y = eInfo[1];
            newEntity.modelPosition.z = eInfo[2];
            newEntity.quantity = (int) eInfo[4];

            allEntities[newVectorPos(&allEntities)] = newEntity;
        }
    }
}

void swapItems(){
    if(!inventoryOpen){ 
        currentSwappingIndex = -1;
        return;
    }
    for(int s = 0; s < SLOT_COUNT; s++){
        if(currentSwappingIndex == -1){
            if(allButtons[allSlots[s].buttonIndex].clickUp){
                currentSwappingIndex = s;
                allButtons[allSlots[s].buttonIndex].colour = vec3(1.0f, 0.2f, 0.2f);
                break;
            }
        }
        if(currentSwappingIndex > -1){
            if(allButtons[allSlots[s].buttonIndex].clickUp){
                // swap

                if(s == currentSwappingIndex){
                    if(allSlots[s].itemQuantity < 1){
                        allButtons[allSlots[s].buttonIndex].colour = vec3(1.0f);
                        currentSwappingIndex = -1;
                        break;
                    }
                    // dropping
                    item newEntity = allItems[allSlots[s].itemType];
                    newEntity.itemType = allSlots[s].itemType;
                    float pRotation = mainPlayer.rotation.y;
                    vec3 pPos = mainPlayer.position;

                    newEntity.dropping = true;
                    newEntity.droppingStart = pPos;
                    newEntity.modelPosition = pPos;

                    newEntity.droppingEnd.x = pPos.x - sin(radians(pRotation)) * DROP_DISTANCE_CHARACTER;
                    newEntity.droppingEnd.y = pPos.y;
                    newEntity.droppingEnd.z = pPos.z - cos(radians(pRotation)) * DROP_DISTANCE_CHARACTER;
                    newEntity.droppingEnd = entityColliders(newEntity.droppingEnd);

                    allEntities[newVectorPos(&allEntities)] = newEntity;
                    allSlots[s].itemQuantity -= 1;
                    if(allSlots[s].itemQuantity < 1){
                        allItems[allSlots[s].itemType].removeButton(allSlots[s].buttonIconIndex);
                        allSlots[s].itemType = -1;
                    }
                    allButtons[allSlots[s].buttonIndex].colour = vec3(1.0f);
                    currentSwappingIndex = -1;
                    return;
                }

                int firstSwappedItemType = allSlots[currentSwappingIndex].itemType;
                int firstSwappedItemAmmount = allSlots[currentSwappingIndex].itemQuantity;
                int firstSwappedButtonIndex = allSlots[currentSwappingIndex].buttonIconIndex;
                vec3 firstSwappedButtonPos = allSlots[currentSwappingIndex].buttonPos;
                
                allButtons[allSlots[currentSwappingIndex].buttonIconIndex].position = allSlots[s].buttonPos;
                allSlots[currentSwappingIndex].itemType = allSlots[s].itemType;
                allSlots[currentSwappingIndex].itemQuantity = allSlots[s].itemQuantity;
                allSlots[currentSwappingIndex].buttonIconIndex = allSlots[s].buttonIconIndex;

                allButtons[allSlots[s].buttonIconIndex].position = firstSwappedButtonPos;
                allSlots[s].itemType = firstSwappedItemType;
                allSlots[s].itemQuantity = firstSwappedItemAmmount;
                allSlots[s].buttonIconIndex = firstSwappedButtonIndex;
                
                allButtons[allSlots[s].buttonIndex].colour = vec3(1.0f);
                currentSwappingIndex = -1;
            }
        }
    }   
}

void givePlayerEntity(){
    vec3 pPos = mainPlayer.position;

    vector<int> deletedEntities;
    int eCount = allEntities.size();
    if(mainPlayer.health < 1){
        return;
    }
    for(int e = 0; e < eCount; e++){
        vec3 ePos = allEntities[e].modelPosition;
        float distance = glm::distance(pPos, ePos);

        if(distance < PLAYER_PICKUP_RADIUS && !allEntities[e].dropping){
            int slotIndex = -1;
            int firstEmptySlot = -1;
            bool fillingSlot = false;
            for(int s = 0; s < SLOT_COUNT; s++){
                if(allSlots[s].itemType == allEntities[e].itemType){
                    if(allSlots[s].itemQuantity < SLOT_MAX_COUNT){
                        slotIndex = s;
                        fillingSlot = true;
                        break;
                    }
                }
                if(allSlots[s].itemType == -1){
                    if(firstEmptySlot == -1){
                        firstEmptySlot = s;
                    }
                }
            }
            if(slotIndex == -1){
                slotIndex = firstEmptySlot;
                if(firstEmptySlot == -1){
                    return;
                }
            }
            if(!fillingSlot){
                allItems[allEntities[e].itemType].createButtonIcon(slotIndex);
            }
            int leftover = -1;
            int added = allEntities[e].quantity;
            if(allSlots[slotIndex].itemQuantity + added > SLOT_MAX_COUNT){
                added = SLOT_MAX_COUNT - allSlots[slotIndex].itemQuantity;
                leftover = allEntities[e].quantity - added;
            }
            allSlots[slotIndex].itemQuantity += added;
            allSlots[slotIndex].itemType = allEntities[e].itemType;
            if(leftover == -1){
                deletedEntities[newVectorPos(&deletedEntities)] = e;
            }
            if(leftover != -1){
                allEntities[e].quantity -= added;
            }
        }
    }

    int dCount = deletedEntities.size();
    for(int d = dCount - 1; d > -1; d--){
        allEntities.erase(allEntities.begin() + deletedEntities[d]);
    }
}