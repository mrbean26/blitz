#include "monsters.h"
#include "frontend.h"
#include "weapons.h"
#include "structures.h"

double bearingOne(float one, float two) {
	double angle = atan(one - two);
	if (angle < 0.0) {
		angle += pi<float>() * 2;
	}
	return degrees(angle);
}

double bearingTwo(vec2 xyOne, vec2 xyTwo) {
	double angle = atan2(xyTwo.x - xyOne.x,
		xyTwo.y - xyOne.y);
	if (angle < 0.0) {
		angle += pi<float>() * 2;
	}
	return degrees(angle);
}

int earthOne, earthTwo;

void monstersBegin() {
	// earth one
	vector<float> earthOneVerts = { 
		-0.191593, 0.052576, 1.00506, 0.0960784, 0.330392, 0.213529, 0.113036, 0.000117, 0.813226, 0.0960784, 0.330392, 0.213529, -0.191593, 0.000117, 1.00506, 0.0960784, 0.330392, 0.213529, 0.113036, 0.052576, 0.813226, 0.112941, 0.356667, 0.210392, 0.14099, 0.000117, 0.857616, 0.112941, 0.356667, 0.210392, 0.113036, 0.000117, 0.813226, 0.112941, 0.356667, 0.210392, 0.14099, 0.052576, 0.857616, 0.0988235, 0.318235, 0.184902, -0.163639, 0.000117, 1.04945, 0.0988235, 0.318235, 0.184902, 0.14099, 0.000117, 0.857616, 0.0988235, 0.318235, 0.184902, -0.163639, 0.052576, 1.04945, 0.111373, 0.355882, 0.200588, -0.191593, 0.000117, 1.00506, 0.111373, 0.355882, 0.200588, -0.163639, 0.000117, 1.04945, 0.111373, 0.355882, 0.200588, 0.14099, 0.000117, 0.857616, 0.0956863, 0.334706, 0.191569, -0.191593, 0.000117, 1.00506, 0.0956863, 0.334706, 0.191569, 0.113036, 0.000117, 0.813226, 0.0956863, 0.334706, 0.191569, 0.113036, 0.052576, 0.813226, 0.123137, 0.33902, 0.171569, -0.163639, 0.052576, 1.04945, 0.123137, 0.33902, 0.171569, 0.14099, 0.052576, 0.857616, 0.123137, 0.33902, 0.171569, -0.191593, 0.052576, 1.00506, 0.0803922, 0.35, 0.172353, 0.113036, 0.052576, 0.813226, 0.0803922, 0.35, 0.172353, 0.113036, 0.000117, 0.813226, 0.0803922, 0.35, 0.172353, 0.113036, 0.052576, 0.813226, 0.129412, 0.346078, 0.180196, 0.14099, 0.052576, 0.857616, 0.129412, 0.346078, 0.180196, 0.14099, 0.000117, 0.857616, 0.129412, 0.346078, 0.180196, 0.14099, 0.052576, 0.857616, 0.094902, 0.334706, 0.178627, -0.163639, 0.052576, 1.04945, 0.094902, 0.334706, 0.178627, -0.163639, 0.000117, 1.04945, 0.094902, 0.334706, 0.178627, -0.163639, 0.052576, 1.04945, 0.0984314, 0.322941, 0.202549, -0.191593, 0.052576, 1.00506, 0.0984314, 0.322941, 0.202549, -0.191593, 0.000117, 1.00506, 0.0984314, 0.322941, 0.202549, 0.14099, 0.000117, 0.857616, 0.124314, 0.313529, 0.185294, -0.163639, 0.000117, 1.04945, 0.124314, 0.313529, 0.185294, -0.191593, 0.000117, 1.00506, 0.124314, 0.313529, 0.185294, 0.113036, 0.052576, 0.813226, 0.122353, 0.345686, 0.209216, -0.191593, 0.052576, 1.00506, 0.122353, 0.345686, 0.209216, -0.163639, 0.052576, 1.04945, 0.122353, 0.345686, 0.209216, 0.11817, 0.052576, 0.871333, 0.085098, 0.313922, 0.176667, -0.200815, 0.000117, -0.12818, 0.085098, 0.313922, 0.176667, 0.11817, 0.000117, 0.871333, 0.085098, 0.313922, 0.176667, -0.200815, 0.052576, -0.12818, 0.125098, 0.310392, 0.194314, -0.150839, 0.000117, -0.144129, 0.125098, 0.310392, 0.194314, -0.200815, 0.000117, -0.12818, 0.125098, 0.310392, 0.194314, -0.150839, 0.052576, -0.144129, 0.111373, 0.351961, 0.177843, 0.168146, 0.000117, 0.855384, 0.111373, 0.351961, 0.177843, -0.150839, 0.000117, -0.144129, 0.111373, 0.351961, 0.177843, 0.168146, 0.052576, 0.855384, 0.116078, 0.32098, 0.205686, 0.11817, 0.000117, 0.871333, 0.116078, 0.32098, 0.205686, 0.168146, 0.000117, 0.855384, 0.116078, 0.32098, 0.205686, -0.150839, 0.000117, -0.144129, 0.103137, 0.313922, 0.177843, 0.11817, 0.000117, 0.871333, 0.103137, 0.313922, 0.177843, -0.200815, 0.000117, -0.12818, 0.103137, 0.313922, 0.177843, -0.200815, 0.052576, -0.12818, 0.113333, 0.31902, 0.216275, 0.168146, 0.052576, 0.855384, 0.113333, 0.31902, 0.216275, -0.150839, 0.052576, -0.144129, 0.113333, 0.31902, 0.216275, 0.11817, 0.052576, 0.871333, 0.118431, 0.322549, 0.204118, -0.200815, 0.052576, -0.12818, 0.118431, 0.322549, 0.204118, -0.200815, 0.000117, -0.12818, 0.118431, 0.322549, 0.204118, -0.200815, 0.052576, -0.12818, 0.114902, 0.348039, 0.176275, -0.150839, 0.052576, -0.144129, 0.114902, 0.348039, 0.176275, -0.150839, 0.000117, -0.144129, 0.114902, 0.348039, 0.176275, -0.150839, 0.052576, -0.144129, 0.128627, 0.354706, 0.206078, 0.168146, 0.052576, 0.855384, 0.128627, 0.354706, 0.206078, 0.168146, 0.000117, 0.855384, 0.128627, 0.354706, 0.206078, 0.168146, 0.052576, 0.855384, 0.105098, 0.323333, 0.172745, 0.11817, 0.052576, 0.871333, 0.105098, 0.323333, 0.172745, 0.11817, 0.000117, 0.871333, 0.105098, 0.323333, 0.172745, -0.150839, 0.000117, -0.144129, 0.0890196, 0.330392, 0.204118, 0.168146, 0.000117, 0.855384, 0.0890196, 0.330392, 0.204118, 0.11817, 0.000117, 0.871333, 0.0890196, 0.330392, 0.204118, -0.200815, 0.052576, -0.12818, 0.0964706, 0.31549, 0.191961, 0.11817, 0.052576, 0.871333, 0.0964706, 0.31549, 0.191961, 0.168146, 0.052576, 0.855384, 0.0964706, 0.31549, 0.191961, 0, -0.025725, 0, 0.0858824, 0.35902, 0.214314, 0.3618, -0.004717, 0.35749, 0.0858824, 0.35902, 0.214314, -0.138193, -0.004717, 0.578435, 0.0858824, 0.35902, 0.214314, 0.3618, -0.004717, 0.35749, 0.123137, 0.317843, 0.214314, 0, -0.025725, 0, 0.123137, 0.317843, 0.214314, 0.3618, -0.004717, -0.35749, 0.123137, 0.317843, 0.214314, 0, -0.025725, 0, 0.0835294, 0.356667, 0.197843, -0.138193, -0.004717, 0.578435, 0.0835294, 0.356667, 0.197843, -0.447212, -0.004717, 0, 0.0835294, 0.356667, 0.197843, 0, -0.025725, 0, 0.0996078, 0.341765, 0.175882, -0.447212, -0.004717, 0, 0.0996078, 0.341765, 0.175882, -0.138193, -0.004717, -0.578435, 0.0996078, 0.341765, 0.175882, 0, -0.025725, 0, 0.114118, 0.321373, 0.175098, -0.138193, -0.004717, -0.578435, 0.114118, 0.321373, 0.175098, 0.3618, -0.004717, -0.35749, 0.114118, 0.321373, 0.175098, 0.3618, -0.004717, 0.35749, 0.0839216, 0.34451, 0.177451, 0.3618, -0.004717, -0.35749, 0.0839216, 0.34451, 0.177451, 0.447212, 0.310986, 0, 0.0839216, 0.34451, 0.177451, -0.138193, -0.004717, 0.578435, 0.100784, 0.331176, 0.215098, 0.3618, -0.004717, 0.35749, 0.100784, 0.331176, 0.215098, 0.138193, 0.310986, 0.578435, 0.100784, 0.331176, 0.215098, -0.447212, -0.004717, 0, 0.0878431, 0.339804, 0.199412, -0.138193, -0.004717, 0.578435, 0.0878431, 0.339804, 0.199412, -0.3618, 0.310986, 0.35749, 0.0878431, 0.339804, 0.199412, -0.138193, -0.004717, -0.578435, 0.12549, 0.329608, 0.197059, -0.447212, -0.004717, 0, 0.12549, 0.329608, 0.197059, -0.3618, 0.310986, -0.35749, 0.12549, 0.329608, 0.197059, 0.3618, -0.004717, -0.35749, 0.0921569, 0.312745, 0.17, -0.138193, -0.004717, -0.578435, 0.0921569, 0.312745, 0.17, 0.138193, 0.310986, -0.578435, 0.0921569, 0.312745, 0.17, 0.3618, -0.004717, 0.35749, 0.106275, 0.336275, 0.208431, 0.447212, 0.310986, 0, 0.106275, 0.336275, 0.208431, 0.138193, 0.310986, 0.578435, 0.106275, 0.336275, 0.208431, -0.138193, -0.004717, 0.578435, 0.0894118, 0.312745, 0.177843, 0.138193, 0.310986, 0.578435, 0.0894118, 0.312745, 0.177843, -0.3618, 0.310986, 0.35749, 0.0894118, 0.312745, 0.177843, -0.447212, -0.004717, 0, 0.0996078, 0.323333, 0.196667, -0.3618, 0.310986, 0.35749, 0.0996078, 0.323333, 0.196667, -0.3618, 0.310986, -0.35749, 0.0996078, 0.323333, 0.196667, -0.138193, -0.004717, -0.578435, 0.0968627, 0.31, 0.178627, -0.3618, 0.310986, -0.35749, 0.0968627, 0.31, 0.178627, 0.138193, 0.310986, -0.578435, 0.0968627, 0.31, 0.178627, 0.3618, -0.004717, -0.35749, 0.0984314, 0.354706, 0.211961, 0.138193, 0.310986, -0.578435, 0.0984314, 0.354706, 0.211961, 0.447212, 0.310986, 0, 0.0984314, 0.354706, 0.211961, 0.138193, 0.310986, 0.578435, 0.11098, 0.316667, 0.170784, 0.447212, 0.310986, 0, 0.11098, 0.316667, 0.170784, 0, 0.480642, 0, 0.11098, 0.316667, 0.170784, -0.3618, 0.310986, 0.35749, 0.123137, 0.342157, 0.176667, 0.138193, 0.310986, 0.578435, 0.123137, 0.342157, 0.176667, 0, 0.480642, 0, 0.123137, 0.342157, 0.176667, -0.3618, 0.310986, -0.35749, 0.116863, 0.311176, 0.170784, -0.3618, 0.310986, 0.35749, 0.116863, 0.311176, 0.170784, 0, 0.480642, 0, 0.116863, 0.311176, 0.170784, 0.138193, 0.310986, -0.578435, 0.0929412, 0.341373, 0.206863, -0.3618, 0.310986, -0.35749, 0.0929412, 0.341373, 0.206863, 0, 0.480642, 0, 0.0929412, 0.341373, 0.206863, 0.447212, 0.310986, 0, 0.124706, 0.327647, 0.172745, 0.138193, 0.310986, -0.578435, 0.124706, 0.327647, 0.172745, 0, 0.480642, 0, 0.124706, 0.327647, 0.172745 
	};
	earthOne = createMonsterTemplate(EARTH_ONE, earthOneVerts, 20.0f, vec3(1.25f)); // mouse thing
	// earth two
	vector<float> earthTwoVerts = { 
		-0.576064, 0.08198, 0.079887, 0.0960784, 0.330392, 0.213529, -0.551547, 0.050374, -0.080113, 0.0960784, 0.330392, 0.213529, -0.551547, 0.050374, 0.079887, 0.0960784, 0.330392, 0.213529, -0.551547, 0.050374, -0.080113, 0.112941, 0.356667, 0.210392, -0.433836, 0.192304, -0.080113, 0.112941, 0.356667, 0.210392, -0.409319, 0.160697, -0.080113, 0.112941, 0.356667, 0.210392, -0.433836, 0.192304, -0.080113, 0.0988235, 0.318235, 0.184902, -0.409319, 0.160697, -0.000113, 0.0988235, 0.318235, 0.184902, -0.409319, 0.160697, -0.080113, 0.0988235, 0.318235, 0.184902, -0.433836, 0.192304, -0.000113, 0.111373, 0.355882, 0.200588, -0.551547, 0.050374, 0.079887, 0.111373, 0.355882, 0.200588, -0.409319, 0.160697, -0.000113, 0.111373, 0.355882, 0.200588, -0.551547, 0.050374, -0.080113, 0.0956863, 0.334706, 0.191569, -0.409319, 0.160697, -0.000113, 0.0956863, 0.334706, 0.191569, -0.551547, 0.050374, 0.079887, 0.0956863, 0.334706, 0.191569, -0.576064, 0.08198, -0.080113, 0.123137, 0.33902, 0.171569, -0.433836, 0.192304, -0.000113, 0.123137, 0.33902, 0.171569, -0.433836, 0.192304, -0.080113, 0.123137, 0.33902, 0.171569, -0.576064, 0.08198, 0.079887, 0.0803922, 0.35, 0.172353, -0.576064, 0.08198, -0.080113, 0.0803922, 0.35, 0.172353, -0.551547, 0.050374, -0.080113, 0.0803922, 0.35, 0.172353, -0.551547, 0.050374, -0.080113, 0.129412, 0.346078, 0.180196, -0.576064, 0.08198, -0.080113, 0.129412, 0.346078, 0.180196, -0.433836, 0.192304, -0.080113, 0.129412, 0.346078, 0.180196, -0.433836, 0.192304, -0.080113, 0.094902, 0.334706, 0.178627, -0.433836, 0.192304, -0.000113, 0.094902, 0.334706, 0.178627, -0.409319, 0.160697, -0.000113, 0.094902, 0.334706, 0.178627, -0.433836, 0.192304, -0.000113, 0.0984314, 0.322941, 0.202549, -0.576064, 0.08198, 0.079887, 0.0984314, 0.322941, 0.202549, -0.551547, 0.050374, 0.079887, 0.0984314, 0.322941, 0.202549, -0.551547, 0.050374, -0.080113, 0.124314, 0.313529, 0.185294, -0.409319, 0.160697, -0.080113, 0.124314, 0.313529, 0.185294, -0.409319, 0.160697, -0.000113, 0.124314, 0.313529, 0.185294, -0.576064, 0.08198, -0.080113, 0.122353, 0.345686, 0.209216, -0.576064, 0.08198, 0.079887, 0.122353, 0.345686, 0.209216, -0.433836, 0.192304, -0.000113, 0.122353, 0.345686, 0.209216, 0.584963, 0.08198, -0.08, 0.085098, 0.313922, 0.176667, 0.560447, 0.050374, 0.08, 0.085098, 0.313922, 0.176667, 0.560447, 0.050374, -0.08, 0.085098, 0.313922, 0.176667, 0.584963, 0.08198, 0.08, 0.125098, 0.310392, 0.194314, 0.418219, 0.160697, 0, 0.125098, 0.310392, 0.194314, 0.560447, 0.050374, 0.08, 0.125098, 0.310392, 0.194314, 0.442735, 0.192304, 0, 0.111373, 0.351961, 0.177843, 0.418219, 0.160697, -0.08, 0.111373, 0.351961, 0.177843, 0.418219, 0.160697, 0, 0.111373, 0.351961, 0.177843, 0.418219, 0.160697, -0.08, 0.116078, 0.32098, 0.205686, 0.584963, 0.08198, -0.08, 0.116078, 0.32098, 0.205686, 0.560447, 0.050374, -0.08, 0.116078, 0.32098, 0.205686, 0.418219, 0.160697, 0, 0.103137, 0.313922, 0.177843, 0.560447, 0.050374, -0.08, 0.103137, 0.313922, 0.177843, 0.560447, 0.050374, 0.08, 0.103137, 0.313922, 0.177843, 0.442735, 0.192304, 0, 0.113333, 0.31902, 0.216275, 0.584963, 0.08198, -0.08, 0.113333, 0.31902, 0.216275, 0.442735, 0.192304, -0.08, 0.113333, 0.31902, 0.216275, 0.584963, 0.08198, -0.08, 0.118431, 0.322549, 0.204118, 0.584963, 0.08198, 0.08, 0.118431, 0.322549, 0.204118, 0.560447, 0.050374, 0.08, 0.118431, 0.322549, 0.204118, 0.584963, 0.08198, 0.08, 0.114902, 0.348039, 0.176275, 0.442735, 0.192304, 0, 0.114902, 0.348039, 0.176275, 0.418219, 0.160697, 0, 0.114902, 0.348039, 0.176275, 0.442735, 0.192304, 0, 0.128627, 0.354706, 0.206078, 0.442735, 0.192304, -0.08, 0.128627, 0.354706, 0.206078, 0.418219, 0.160697, -0.08, 0.128627, 0.354706, 0.206078, 0.418219, 0.160697, -0.08, 0.105098, 0.323333, 0.172745, 0.442735, 0.192304, -0.08, 0.105098, 0.323333, 0.172745, 0.584963, 0.08198, -0.08, 0.105098, 0.323333, 0.172745, 0.418219, 0.160697, 0, 0.0890196, 0.330392, 0.204118, 0.418219, 0.160697, -0.08, 0.0890196, 0.330392, 0.204118, 0.560447, 0.050374, -0.08, 0.0890196, 0.330392, 0.204118, 0.442735, 0.192304, 0, 0.0964706, 0.31549, 0.191961, 0.584963, 0.08198, 0.08, 0.0964706, 0.31549, 0.191961, 0.584963, 0.08198, -0.08, 0.0964706, 0.31549, 0.191961, -0.433223, 0.190302, 0, 0.0858824, 0.35902, 0.214314, -0.45774, 0.158696, -0.08, 0.0858824, 0.35902, 0.214314, -0.45774, 0.158696, 0, 0.0858824, 0.35902, 0.214314, -0.45774, 0.158696, -0.08, 0.123137, 0.317843, 0.214314, -0.148768, -0.030344, -0.08, 0.123137, 0.317843, 0.214314, -0.173284, -0.061951, -0.08, 0.123137, 0.317843, 0.214314, -0.148768, -0.030344, -0.08, 0.0835294, 0.356667, 0.197843, -0.173284, -0.061951, 0.08, 0.0835294, 0.356667, 0.197843, -0.173284, -0.061951, -0.08, 0.0835294, 0.356667, 0.197843, -0.148768, -0.030344, 0.08, 0.0996078, 0.341765, 0.175882, -0.45774, 0.158696, 0, 0.0996078, 0.341765, 0.175882, -0.173284, -0.061951, 0.08, 0.0996078, 0.341765, 0.175882, -0.173284, -0.061951, -0.08, 0.114118, 0.321373, 0.175098, -0.45774, 0.158696, 0, 0.114118, 0.321373, 0.175098, -0.45774, 0.158696, -0.08, 0.114118, 0.321373, 0.175098, -0.148768, -0.030344, -0.08, 0.0839216, 0.34451, 0.177451, -0.433223, 0.190302, 0, 0.0839216, 0.34451, 0.177451, -0.148768, -0.030344, 0.08, 0.0839216, 0.34451, 0.177451, -0.433223, 0.190302, 0, 0.100784, 0.331176, 0.215098, -0.433223, 0.190302, -0.08, 0.100784, 0.331176, 0.215098, -0.45774, 0.158696, -0.08, 0.100784, 0.331176, 0.215098, -0.45774, 0.158696, -0.08, 0.0878431, 0.339804, 0.199412, -0.433223, 0.190302, -0.08, 0.0878431, 0.339804, 0.199412, -0.148768, -0.030344, -0.08, 0.0878431, 0.339804, 0.199412, -0.148768, -0.030344, -0.08, 0.12549, 0.329608, 0.197059, -0.148768, -0.030344, 0.08, 0.12549, 0.329608, 0.197059, -0.173284, -0.061951, 0.08, 0.12549, 0.329608, 0.197059, -0.148768, -0.030344, 0.08, 0.0921569, 0.312745, 0.17, -0.433223, 0.190302, 0, 0.0921569, 0.312745, 0.17, -0.45774, 0.158696, 0, 0.0921569, 0.312745, 0.17, -0.173284, -0.061951, -0.08, 0.106275, 0.336275, 0.208431, -0.173284, -0.061951, 0.08, 0.106275, 0.336275, 0.208431, -0.45774, 0.158696, 0, 0.106275, 0.336275, 0.208431, -0.148768, -0.030344, -0.08, 0.0894118, 0.312745, 0.177843, -0.433223, 0.190302, -0.08, 0.0894118, 0.312745, 0.177843, -0.433223, 0.190302, 0, 0.0894118, 0.312745, 0.177843, 0, -0.262674, -0, 0.0996078, 0.323333, 0.196667, 0.190071, -0.117472, 0.138093, 0.0996078, 0.323333, 0.196667, -0.072599, -0.117472, 0.223441, 0.0996078, 0.323333, 0.196667, 0.190071, -0.117472, 0.138093, 0.0968627, 0.31, 0.178627, 0, -0.262674, -0, 0.0968627, 0.31, 0.178627, 0.190071, -0.117472, -0.138093, 0.0968627, 0.31, 0.178627, 0, -0.262674, -0, 0.0984314, 0.354706, 0.211961, -0.072599, -0.117472, 0.223441, 0.0984314, 0.354706, 0.211961, -0.234942, -0.117472, -0, 0.0984314, 0.354706, 0.211961, 0, -0.262674, -0, 0.11098, 0.316667, 0.170784, -0.234942, -0.117472, -0, 0.11098, 0.316667, 0.170784, -0.072599, -0.117472, -0.223441, 0.11098, 0.316667, 0.170784, 0, -0.262674, -0, 0.123137, 0.342157, 0.176667, -0.072599, -0.117472, -0.223441, 0.123137, 0.342157, 0.176667, 0.190071, -0.117472, -0.138093, 0.123137, 0.342157, 0.176667, 0.190071, -0.117472, 0.138093, 0.116863, 0.311176, 0.170784, 0.190071, -0.117472, -0.138093, 0.116863, 0.311176, 0.170784, 0.234942, 0.117472, 0, 0.116863, 0.311176, 0.170784, -0.072599, -0.117472, 0.223441, 0.0929412, 0.341373, 0.206863, 0.190071, -0.117472, 0.138093, 0.0929412, 0.341373, 0.206863, 0.072599, 0.117472, 0.223441, 0.0929412, 0.341373, 0.206863, -0.234942, -0.117472, -0, 0.124706, 0.327647, 0.172745, -0.072599, -0.117472, 0.223441, 0.124706, 0.327647, 0.172745, -0.190071, 0.117472, 0.138093, 0.124706, 0.327647, 0.172745, -0.072599, -0.117472, -0.223441, 0.0996078, 0.312745, 0.218235, -0.234942, -0.117472, -0, 0.0996078, 0.312745, 0.218235, -0.190071, 0.117472, -0.138093, 0.0996078, 0.312745, 0.218235, 0.190071, -0.117472, -0.138093, 0.0803922, 0.356667, 0.206078, -0.072599, -0.117472, -0.223441, 0.0803922, 0.356667, 0.206078, 0.072599, 0.117472, -0.223441, 0.0803922, 0.356667, 0.206078, 0.190071, -0.117472, 0.138093, 0.119216, 0.323333, 0.205294, 0.234942, 0.117472, 0, 0.119216, 0.323333, 0.205294, 0.072599, 0.117472, 0.223441, 0.119216, 0.323333, 0.205294, -0.072599, -0.117472, 0.223441, 0.117255, 0.336275, 0.207647, 0.072599, 0.117472, 0.223441, 0.117255, 0.336275, 0.207647, -0.190071, 0.117472, 0.138093, 0.117255, 0.336275, 0.207647, -0.234942, -0.117472, -0, 0.113725, 0.317451, 0.200588, -0.190071, 0.117472, 0.138093, 0.113725, 0.317451, 0.200588, -0.190071, 0.117472, -0.138093, 0.113725, 0.317451, 0.200588, -0.072599, -0.117472, -0.223441, 0.121569, 0.345686, 0.188039, -0.190071, 0.117472, -0.138093, 0.121569, 0.345686, 0.188039, 0.072599, 0.117472, -0.223441, 0.121569, 0.345686, 0.188039, 0.190071, -0.117472, -0.138093, 0.108235, 0.331176, 0.19902, 0.072599, 0.117472, -0.223441, 0.108235, 0.331176, 0.19902, 0.234942, 0.117472, 0, 0.108235, 0.331176, 0.19902, 0.072599, 0.117472, 0.223441, 0.109804, 0.321765, 0.203333, 0.234942, 0.117472, 0, 0.109804, 0.321765, 0.203333, 0, 0.262674, 0, 0.109804, 0.321765, 0.203333, -0.190071, 0.117472, 0.138093, 0.0843137, 0.34098, 0.206471, 0.072599, 0.117472, 0.223441, 0.0843137, 0.34098, 0.206471, 0, 0.262674, 0, 0.0843137, 0.34098, 0.206471, -0.190071, 0.117472, -0.138093, 0.0815686, 0.314314, 0.173529, -0.190071, 0.117472, 0.138093, 0.0815686, 0.314314, 0.173529, 0, 0.262674, 0, 0.0815686, 0.314314, 0.173529, 0.072599, 0.117472, -0.223441, 0.10549, 0.345294, 0.203333, -0.190071, 0.117472, -0.138093, 0.10549, 0.345294, 0.203333, 0, 0.262674, 0, 0.10549, 0.345294, 0.203333, 0.234942, 0.117472, 0, 0.0823529, 0.324118, 0.210784, 0.072599, 0.117472, -0.223441, 0.0823529, 0.324118, 0.210784, 0, 0.262674, 0, 0.0823529, 0.324118, 0.210784, 0.443826, 0.190302, -0.08, 0.0980392, 0.346471, 0.171569, 0.468343, 0.158696, 0, 0.0980392, 0.346471, 0.171569, 0.468343, 0.158696, -0.08, 0.0980392, 0.346471, 0.171569, 0.468343, 0.158696, 0, 0.12, 0.350392, 0.208431, 0.159371, -0.030344, 0.08, 0.12, 0.350392, 0.208431, 0.183887, -0.061951, 0.08, 0.12, 0.350392, 0.208431, 0.159371, -0.030344, 0.08, 0.0894118, 0.317059, 0.186863, 0.183887, -0.061951, -0.08, 0.0894118, 0.317059, 0.186863, 0.183887, -0.061951, 0.08, 0.0894118, 0.317059, 0.186863, 0.159371, -0.030344, -0.08, 0.113333, 0.353137, 0.209216, 0.468343, 0.158696, -0.08, 0.113333, 0.353137, 0.209216, 0.183887, -0.061951, -0.08, 0.113333, 0.353137, 0.209216, 0.468343, 0.158696, 0, 0.0901961, 0.323725, 0.190784, 0.183887, -0.061951, -0.08, 0.0901961, 0.323725, 0.190784, 0.468343, 0.158696, -0.08, 0.0901961, 0.323725, 0.190784, 0.443826, 0.190302, 0, 0.116863, 0.310784, 0.21902, 0.159371, -0.030344, -0.08, 0.116863, 0.310784, 0.21902, 0.159371, -0.030344, 0.08, 0.116863, 0.310784, 0.21902, 0.443826, 0.190302, -0.08, 0.0964706, 0.351176, 0.206471, 0.443826, 0.190302, 0, 0.0964706, 0.351176, 0.206471, 0.468343, 0.158696, 0, 0.0964706, 0.351176, 0.206471, 0.468343, 0.158696, 0, 0.113725, 0.327647, 0.183333, 0.443826, 0.190302, 0, 0.113725, 0.327647, 0.183333, 0.159371, -0.030344, 0.08, 0.113725, 0.327647, 0.183333, 0.159371, -0.030344, 0.08, 0.0839216, 0.311569, 0.180588, 0.159371, -0.030344, -0.08, 0.0839216, 0.311569, 0.180588, 0.183887, -0.061951, -0.08, 0.0839216, 0.311569, 0.180588, 0.159371, -0.030344, -0.08, 0.0831373, 0.343726, 0.175098, 0.443826, 0.190302, -0.08, 0.0831373, 0.343726, 0.175098, 0.468343, 0.158696, -0.08, 0.0831373, 0.343726, 0.175098, 0.468343, 0.158696, 0, 0.111373, 0.35549, 0.203333, 0.183887, -0.061951, 0.08, 0.111373, 0.35549, 0.203333, 0.183887, -0.061951, -0.08, 0.111373, 0.35549, 0.203333, 0.443826, 0.190302, 0, 0.128235, 0.314706, 0.190392, 0.443826, 0.190302, -0.08, 0.128235, 0.314706, 0.190392, 0.159371, -0.030344, -0.08, 0.128235, 0.314706, 0.190392 
	};
	earthTwo = createMonsterTemplate(EARTH_TWO, earthTwoVerts, 80.0f, vec3(2.5f)); // punchy boi
	getMonsters();
}

void monsterMonsterColliders(){
	float distanceFromMonster = 1.75f;
	int mCount = allMonsters.size();
	for(int m = 0; m < mCount; m++){
		vec3 positionOne = allMonsters[m].position;
		vec2 positionOneFloor = vec2(positionOne.x, positionOne.z);
		for(int m2 = 0; m2 < mCount; m2++){
			if(m2==m){
				continue;
			}
			vec3 positionTwo = allMonsters[m2].position;
			vec2 positionTwoFloor = vec2(positionTwo.x, positionTwo.z);
			
			if(positionOne.z >= positionTwo.z - distanceFromMonster && positionOne.z <= positionTwo.z + distanceFromMonster){
				if(positionOne.x >= positionTwo.x && positionOne.x < positionTwo.x + distanceFromMonster){
					allMonsters[m].position.x = positionTwo.x + distanceFromMonster;
				}
				if(positionOne.x < positionTwo.x && positionOne.x > positionTwo.x - distanceFromMonster){
					allMonsters[m].position.x = positionTwo.x - distanceFromMonster;
				}
			}
			if(positionOne.x >= positionTwo.x - distanceFromMonster && positionOne.x <= positionTwo.x + distanceFromMonster){
				if(positionOne.z >= positionTwo.z && positionOne.z < positionTwo.z + distanceFromMonster){
					allMonsters[m].position.z = positionTwo.z + distanceFromMonster;
				}
				if(positionOne.z < positionTwo.z && positionOne.z > positionTwo.z - distanceFromMonster){
					allMonsters[m].position.z = positionTwo.z - distanceFromMonster;
				}
			}
		}
	}
}

void monstersMainloop() {
	if (!WorldGeneration.startedBegin) {
		return;
	}
	monsterSpawning();
	monsterInteractions();
	monsterMonsterColliders();
	monsterBuildCollisions();
	monsterDamage();
	renderMonsters();
}

void monsterBuildCollisions(){
	int mCount = allMonsters.size();
	for(int m = 0; m < mCount; m++){
		int waste = 0; float wasteF = 0.0f; bool wasteB = false;
		buildCollisions(allMonsters[m].position, waste, wasteF, wasteB);
	}
}

vector<monster> allMonsterTemplates, allMonsters;
int createMonsterTemplate(int name, vector<float> vertices,
		float health, vec3 scale) {
	monster newMonster(name, vertices);
	newMonster.scale = scale;
	newMonster.health = health;
	int size = allMonsterTemplates.size();
	allMonsterTemplates[newVectorPos(&allMonsterTemplates)] = newMonster;
	return size;
}

monster::monster(int name, vector<float> vertices){
	monsterName = name;
	startIrregularColorBuilding(vertices, VAO,
		VBO, size);
}

void monster::render(){
	glUseProgram(playerShader);

	setMat4(playerShader, "model", modelMatrix(position, rotation, scale));
	setMat4(playerShader, "projection", projectionMatrix());
	setMat4(playerShader, "view", viewMatrix());

	setShaderVecThree(playerShader, "multiplyColour", multiplyColour);
	setShaderVecThree(playerShader, "lightPos", lightPos);
	setShaderFloat(playerShader, "lightIntensity", lightIntensity);
	setShaderFloat(playerShader, "lightRadius", lightRadius);
	setShaderInt(playerShader, "useLight", 1);
	setShaderFloat(playerShader, "lowestLight", lowestLight);

	glBindVertexArray(VAO);
	glDrawArrays(GL_TRIANGLES, 0, size);
}

void monsterSpawning() {
	if (lowestLight < 0.7f) {
		if (lightPos.x > 0 && lightPos.x < currentPlanetScale.x) {
			return; // center of light still on surface
		}
		int monsterCount = allMonsters.size();
		// can spawn
		if (monsterCount < 2) {
			int random = randomInt(1, 1000);
			if (random == 1) {
				int type = randomInt(0, 1);
				int newMonster = createMonster(type + WorldGeneration.currentArea);

				vec2 scale = WorldGeneration.currentAreaScale;
				int posX = randomInt(0, scale.x);
				int posZ = -randomInt(0, scale.y);

				allMonsters[newMonster].position = vec3(posX, 3.0f, posZ);
			}
		}
	}
}

float redTime = 2.5f;
void monsterDamage(){
	int mCount = allMonsters.size();
	for(int m = 0; m < mCount; m++){
		vec3 monsterPos = allMonsters[m].position;
		int type = allMonsters[m].monsterName;
		
		float delay = allMonsters[m].changeBackDelay;
		if(delay < 0){
			allMonsters[m].multiplyColour = vec3(1.0f);
		}
		allMonsters[m].changeBackDelay -= deltaTime;

		int bCount = allBullets.size();
		vector<int> bulletCollisionIndexes;
		for(int b = 0; b < bCount; b++){
			vec3 bulletPos = allBullets[b].position;
			if(type == 1){ // MOUSE
				float distance = glm::distance(bulletPos, monsterPos);
				if(distance < 0.5f){
					// collision
					allMonsters[m].health -= allBullets[b].damage;
					allMonsters[m].multiplyColour = vec3(2.5f, 0.2f, 0.2f);
					allMonsters[m].changeBackDelay = redTime;
					bulletCollisionIndexes[newVectorPos(&bulletCollisionIndexes)] = b;
				}
			}
			if(type == 2){ // PUNCHY
			 	 // center part
				float distance = glm::distance(bulletPos, monsterPos - vec3(0.0f, 0.15f, 0.0f));
				float bodyWidth = 0.65f;
				if(distance < 0.65f){
					// collision
					allMonsters[m].health -= allBullets[b].damage;
					allMonsters[m].multiplyColour = vec3(2.5f, 0.2f, 0.2f);
					allMonsters[m].changeBackDelay = redTime;
					bulletCollisionIndexes[newVectorPos(&bulletCollisionIndexes)] = b;
					continue;
				}
				// arms are at rotation - 90 & rotation + 90
				float rotationOne = degreesClamp(allMonsters[m].rotation.y - 90.0f);
				float rotationTwo = degreesClamp(allMonsters[m].rotation.y + 90.0f);
				float usedBearing = degreesClamp(bearingTwo(vec2(monsterPos.x, monsterPos.z), vec2(bulletPos.x, bulletPos.z)));
				
				float armOneDistance = glm::distance(rotationOne, usedBearing);
				float armTwoDistance = glm::distance(rotationTwo, usedBearing);
				float armLength = 1.0f;
				if(armOneDistance < 8.0f || armTwoDistance < 8.0f){
					// inside width of arm
					if(distance < bodyWidth + armLength){
						// collision
						allMonsters[m].health -= allBullets[b].damage;
						allMonsters[m].multiplyColour = vec3(2.5f, 0.2f, 0.2f);
						allMonsters[m].changeBackDelay = redTime;
						bulletCollisionIndexes[newVectorPos(&bulletCollisionIndexes)] = b;
					}
				}
			}
		}

		int oldBulletsCount = bulletCollisionIndexes.size();
		for(int b1 = 0; b1 < oldBulletsCount; b1++){
			removeBullet(bulletCollisionIndexes[b1]);
		}
	}
}

void getMonsters() {
	vector<string> lines = readLines(WorldGeneration.worldLinesPath);
	int count = lines.size();
	for (int l = 0; l < count; l++) {
		string line = lines[l];
		if (contains(line, WorldGeneration.currentAreaPrefix + "Monster")) {
			vec4 monsterData = getVec4File(WorldGeneration.worldLinesPath, 
				WorldGeneration.currentAreaPrefix + "Monster", l);
			int newMonster = createMonster(monsterData.w - 1);
			allMonsters[newMonster].position = vec3(monsterData);
		}
	}
}

int createMonster(int monsterType) {
	monster newMonster = allMonsterTemplates[monsterType];
	allMonsters[newVectorPos(&allMonsters)] = newMonster;
	return allMonsters.size() - 1;
}

void renderMonsters() {
	int mCount = allMonsters.size();
	for (int m = 0; m < mCount; m++) {
		allMonsters[m].render();
	}
}

void monsterInteractions() {
	vec2 playerPos = vec2(mainPlayer.position.x, mainPlayer.position.z);
	int mCount = allMonsters.size();
	for (int m = 0; m < mCount; m++) {
		vec3 monsterPos = allMonsters[m].position;
		float distance = glm::distance(playerPos, vec2(monsterPos.x, monsterPos.z));
		if (distance < 12.0f && distance > 3) {
			float bearingAngle = bearingTwo(playerPos,
				vec2(monsterPos.x, monsterPos.z));
			allMonsters[m].rotation.y = bearingAngle;
		}
		if (distance < 8.0f && distance > 3) {
			float xGap = -sin(radians(allMonsters[m].rotation.y));
			float zGap = -cos(radians(allMonsters[m].rotation.y));
			vec3 gap = vec3(xGap, 0.0f, zGap) * vec3((float)deltaTime) * vec3(allMonsters[m].speed);
			allMonsters[m].position += gap;
		}
	}
}

float degreesClamp(float degrees) {
	float returned = degrees;
	returned = (int) returned % 360;
	if (returned < 0) { returned += 360.0f; }
	return returned;
}

float monsterCameraColliders(vec3 cameraPos, vec3 lookAt, float defaultDistance) {
	float returned = defaultDistance;
	float angleAllowanceDefault = 17.5f;
	float monsterAddSize = 1.0f;

	vec3 playerPos = mainPlayer.position;
	vec2 playerX = vec2(playerPos.x, playerPos.z);

	float changedYaw = degreesClamp(bearingTwo(playerX, vec2(cameraPos.x, cameraPos.z)));
	
	float cameraDistance = glm::distance(playerX, vec2(cameraPos.x, cameraPos.z));
	float yCameraDistance = playerPos.y - cameraPos.y;
	float yCameraAngle = degrees(atan(yCameraDistance / cameraDistance));
	float changedPitch = degreesClamp(yCameraAngle);

	int mCount = allMonsters.size();
	for (int m = 0; m < mCount; m++) {
		vec3 position = allMonsters[m].position;
		vec2 positionX = vec2(position.x, position.z);
		
		float floorLength = glm::distance(playerPos, vec3(position.x, playerPos.y, position.z));
		float yDistance = lookAt.y - position.y;
		float yAngle = degreesClamp(degrees(atan(yDistance / floorLength)));
			
		float floorAngle = degreesClamp(bearingTwo(playerX, positionX));
		float compareYaw = degreesClamp(changedYaw); // x
		float comparePitch = degreesClamp(changedPitch); // y

		float angleAllowance = angleAllowanceDefault / (distanceFromCharacter / 10.0f);
		if(glm::distance(yAngle, comparePitch) < angleAllowance){
			if(glm::distance(floorAngle, compareYaw) < angleAllowance){
				float cameraDistance = glm::distance(cameraPos, lookAt);
				float monsterDistance = glm::distance(position, lookAt);

				if (monsterDistance < cameraDistance + monsterAddSize){
					float newDistance = monsterDistance - monsterAddSize;
					if(newDistance < returned){
						returned = newDistance;
					}
				}
			}
		}
	}
	return returned;
}
	